{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,gLAAO,EAAC,IAAA,uJAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,wPAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,wPAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,wPAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,wPAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,wPAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,wPAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,wPAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,wPAAC,oLAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,wPAAC,qLAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,wPAAC,qLAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,wPAAC,uLAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,4HAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,wPAAC,oLAAoB;gBAAC,OAAO;0BAC3B,cAAA,wPAAC,qPAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,wPAAC,sLAAsB;kBACrB,cAAA,wPAAC,uLAAuB;YACtB,aAAU;YACV,WAAW,IAAA,4HAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,wPAAC;;;;;8BACD,wPAAC,wLAAwB;oBACvB,WAAW,IAAA,4HAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,wPAAC;;;;;;;;;;;;;;;;AAIT;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,wPAAC,qLAAqB;QACpB,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,wPAAC,oLAAoB;QACnB,aAAU;QACV,WAAW,IAAA,4HAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,wPAAC;gBAAK,WAAU;0BACd,cAAA,wPAAC,6LAA6B;8BAC5B,cAAA,wPAAC,+NAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,wPAAC,wLAAwB;0BAAE;;;;;;;;;;;;AAGjC;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,wPAAC,yLAAyB;QACxB,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,wPAAC,8LAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,4HAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,wPAAC,+OAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,wPAAC,gMAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,4HAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,wPAAC,qPAAe;YAAC,WAAU;;;;;;;;;;;AAGjC"}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/components/dashboard-view.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useEffect } from \"react\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport {\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell,\n  Legend,\n  LineChart,\n  Line,\n} from \"recharts\"\n\ninterface StoreData {\n  store: string\n  items: { [key: string]: number }\n  total: number\n}\n\ninterface DailyData {\n  date: string\n  count: number\n}\n\ninterface InvoiceMonthlyData {\n  month: string\n  [store: string]: number | string\n}\n\ninterface StoreCategoryData {\n  store: string\n  categories: {\n    name: string\n    value: number\n    percentage: string\n  }[]\n  total: number\n}\n\ninterface ApiResponse {\n  monthly: StoreData[]\n  today: StoreData[]\n  daily?: DailyData[]\n  invoiceMonthly?: InvoiceMonthlyData[]\n  storeCategories?: StoreCategoryData[]\n  error?: string\n}\n\nconst STORE_ORDER = [\n  \"SPLASH'N'GO!前橋50号店\",\n  \"SPLASH'N'GO!伊勢崎韮塚店\",\n  \"SPLASH'N'GO!高崎棟高店\",\n  \"SPLASH'N'GO!足利緑町店\",\n  \"SPLASH'N'GO!新前橋店\",\n  \"SPLASH'N'GO!太田新田店\",\n]\n\nconst STORE_SHORT_NAMES: { [key: string]: string } = {\n  \"SPLASH'N'GO!前橋50号店\": \"前橋50号\",\n  \"SPLASH'N'GO!伊勢崎韮塚店\": \"伊勢崎韮塚\",\n  \"SPLASH'N'GO!高崎棟高店\": \"高崎棟高\",\n  \"SPLASH'N'GO!足利緑町店\": \"足利緑町\",\n  \"SPLASH'N'GO!新前橋店\": \"新前橋\",\n  \"SPLASH'N'GO!太田新田店\": \"太田新田\",\n}\n\nconst STORE_COLORS = [\"#f59e0b\", \"#eab308\", \"#84cc16\", \"#22c55e\", \"#14b8a6\", \"#06b6d4\"]\n\nconst STORE_COLOR_MAP: { [key: string]: string } = {\n  \"SPLASH'N'GO!前橋50号店\": \"#f59e0b\",\n  \"SPLASH'N'GO!伊勢崎韮塚店\": \"#eab308\",\n  \"SPLASH'N'GO!高崎棟高店\": \"#84cc16\",\n  \"SPLASH'N'GO!足利緑町店\": \"#22c55e\",\n  \"SPLASH'N'GO!新前橋店\": \"#14b8a6\",\n  \"SPLASH'N'GO!太田新田店\": \"#06b6d4\",\n}\n\nconst CATEGORY_COLORS: { [key: string]: string } = {\n  サブスク: \"#f59e0b\",\n  リピート: \"#eab308\",\n  新規: \"#22c55e\",\n  コースアップ: \"#3b82f6\",\n  ポイント: \"#8b5cf6\",\n  キャンペーン: \"#ec4899\",\n  無料券: \"#6b7280\",\n  その他: \"#9ca3af\",\n}\n\nconst COURSE_COLORS: { [key: string]: string } = {\n  プレミアム: \"#f59e0b\",\n  プラス: \"#22c55e\",\n  ナイアガラ: \"#3b82f6\",\n  セラミック: \"#8b5cf6\",\n}\n\nconst handleLegendClick = (dataKey: string, setHiddenStores: React.Dispatch<React.SetStateAction<Set<string>>>) => {\n  setHiddenStores((prev) => {\n    const newSet = new Set(prev)\n    if (newSet.has(dataKey)) {\n      newSet.delete(dataKey)\n    } else {\n      newSet.add(dataKey)\n    }\n    return newSet\n  })\n}\n\nexport default function DashboardView() {\n  const [selectedPeriod, setSelectedPeriod] = useState(\"2025-11\")\n  const [monthlyData, setMonthlyData] = useState<StoreData[]>([])\n  const [todayData, setTodayData] = useState<StoreData[]>([])\n  const [dailyData, setDailyData] = useState<DailyData[]>([])\n  const [invoiceMonthlyData, setInvoiceMonthlyData] = useState<InvoiceMonthlyData[]>([])\n  const [storeCategories, setStoreCategories] = useState<StoreCategoryData[]>([])\n  const [loading, setLoading] = useState(false)\n  const [hiddenStores, setHiddenStores] = useState<Set<string>>(new Set())\n  const [categoryPeriod, setCategoryPeriod] = useState(\"2025-11\")\n\n  const generatePeriods = () => {\n    const periods = []\n    for (let year = 2025; year <= 2030; year++) {\n      for (let month = 1; month <= 12; month++) {\n        periods.push(`${year}-${String(month).padStart(2, \"0\")}`)\n      }\n    }\n    return periods\n  }\n\n  const periods = generatePeriods()\n\n  useEffect(() => {\n    fetchData()\n  }, [selectedPeriod])\n\n  useEffect(() => {\n    fetchCategoryData()\n  }, [categoryPeriod])\n\n  const fetchData = async () => {\n    setLoading(true)\n    try {\n      const response = await fetch(`/api/dashboard?period=${selectedPeriod}`)\n      const result: ApiResponse = await response.json()\n\n      if (result.error || !result.monthly || !result.today) {\n        setMonthlyData([])\n        setTodayData([])\n        setDailyData([])\n        setInvoiceMonthlyData([])\n        return\n      }\n\n      const filteredMonthly = result.monthly.filter(\n        (store: StoreData) => store.store && store.store !== \"0\" && store.store.trim() !== \"\",\n      )\n      const filteredToday = result.today.filter(\n        (store: StoreData) => store.store && store.store !== \"0\" && store.store.trim() !== \"\",\n      )\n\n      const sortByOrder = (data: StoreData[]) => {\n        return [...data].sort((a, b) => {\n          const indexA = STORE_ORDER.indexOf(a.store)\n          const indexB = STORE_ORDER.indexOf(b.store)\n          if (indexA === -1 && indexB === -1) return 0\n          if (indexA === -1) return 1\n          if (indexB === -1) return -1\n          return indexA - indexB\n        })\n      }\n\n      setMonthlyData(sortByOrder(filteredMonthly))\n      setTodayData(sortByOrder(filteredToday))\n      setDailyData(result.daily || [])\n      setInvoiceMonthlyData(result.invoiceMonthly || [])\n    } catch (error) {\n      setMonthlyData([])\n      setTodayData([])\n      setDailyData([])\n      setInvoiceMonthlyData([])\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchCategoryData = async () => {\n    try {\n      console.log(\"[v0] Fetching category data for period:\", categoryPeriod)\n      const response = await fetch(`/api/dashboard?period=${categoryPeriod}&categories=true`)\n      const result: ApiResponse = await response.json()\n      console.log(\"[v0] Category API response:\", result)\n\n      if (result.storeCategories) {\n        console.log(\"[v0] Store categories received:\", result.storeCategories)\n        setStoreCategories(result.storeCategories)\n      } else {\n        console.log(\"[v0] No storeCategories in response\")\n        setStoreCategories([])\n      }\n    } catch (error) {\n      console.error(\"[v0] Error fetching category data:\", error)\n      setStoreCategories([])\n    }\n  }\n\n  const formatPeriodLabel = (period: string) => {\n    const [year, month] = period.split(\"-\")\n    return `${year}年${Number.parseInt(month)}月`\n  }\n\n  const monthlyTotal = monthlyData.reduce((sum, store) => sum + store.total, 0)\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-yellow-50 via-amber-50 to-yellow-100 p-6 flex items-center justify-center\">\n        <div className=\"text-yellow-700 text-lg\">読み込み中...</div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-yellow-50 via-amber-50 to-yellow-100 p-4 md:p-6\">\n      <div className=\"mx-auto max-w-7xl space-y-6\">\n        {/* ヘッダー */}\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 rounded-2xl bg-gradient-to-r from-yellow-400 via-amber-400 to-yellow-500 p-6 shadow-lg\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">DASHBOARD</h1>\n            <p className=\"mt-1 text-gray-800\">店舗別洗車実績レポート</p>\n          </div>\n          <div className=\"w-full md:w-64\">\n            <Select value={selectedPeriod} onValueChange={setSelectedPeriod}>\n              <SelectTrigger className=\"border-2 border-yellow-600/30 bg-white text-gray-900 font-semibold shadow-md\">\n                <SelectValue placeholder=\"期間を選択\" />\n              </SelectTrigger>\n              <SelectContent>\n                {periods.map((period) => (\n                  <SelectItem key={period} value={period}>\n                    {formatPeriodLabel(period)}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        {/* 店舗別詳細カード */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {monthlyData.map((store, index) => {\n            const todayStore = todayData.find((s) => s.store === store.store)\n            const percentage = monthlyTotal > 0 ? ((store.total / monthlyTotal) * 100).toFixed(1) : \"0\"\n\n            return (\n              <Card\n                key={store.store}\n                className=\"border-2 border-yellow-200 bg-white shadow-lg hover:shadow-xl transition-all hover:scale-[1.02]\"\n              >\n                <CardContent className=\"p-5\">\n                  <div className=\"flex items-center gap-3 mb-4\">\n                    <div\n                      className=\"w-4 h-4 rounded-full\"\n                      style={{ backgroundColor: STORE_COLORS[index % STORE_COLORS.length] }}\n                    />\n                    <h3 className=\"text-base font-bold text-gray-900\">\n                      {STORE_SHORT_NAMES[store.store] || store.store}\n                    </h3>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-3 mb-4\">\n                    <div className=\"bg-yellow-50 rounded-xl p-3 border border-yellow-200\">\n                      <p className=\"text-xs text-yellow-700 mb-1\">月間</p>\n                      <p className=\"text-2xl font-bold text-yellow-600\">{store.total}</p>\n                      <p className=\"text-xs text-yellow-600\">台</p>\n                    </div>\n                    <div className=\"bg-green-50 rounded-xl p-3 border border-green-200\">\n                      <p className=\"text-xs text-green-700 mb-1\">本日</p>\n                      <p className=\"text-2xl font-bold text-green-600\">{todayStore?.total || 0}</p>\n                      <p className=\"text-xs text-green-600\">台</p>\n                    </div>\n                  </div>\n\n                  <div className=\"mb-4\">\n                    <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\n                      <span>全体シェア</span>\n                      <span>{percentage}%</span>\n                    </div>\n                    <div className=\"w-full h-2 bg-gray-100 rounded-full overflow-hidden\">\n                      <div\n                        className=\"h-full rounded-full transition-all duration-500\"\n                        style={{\n                          width: `${percentage}%`,\n                          backgroundColor: STORE_COLORS[index % STORE_COLORS.length],\n                        }}\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"border-t border-yellow-100 pt-3\">\n                    <p className=\"text-xs font-medium text-gray-500 mb-2\">カテゴリ内訳</p>\n                    <div className=\"space-y-1.5\">\n                      {Object.entries(store.items)\n                        .sort((a, b) => b[1] - a[1])\n                        .slice(0, 4)\n                        .map(([item, count]) => (\n                          <div key={item} className=\"flex justify-between items-center text-sm\">\n                            <span className=\"text-gray-600 truncate mr-2\">{item}</span>\n                            <span className=\"font-semibold\" style={{ color: CATEGORY_COLORS[item] || \"#6b7280\" }}>\n                              {count}台\n                            </span>\n                          </div>\n                        ))}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            )\n          })}\n        </div>\n\n        {/* 店舗別月額会員数 折れ線グラフ */}\n        <Card className=\"border-2 border-yellow-200 bg-white shadow-lg\">\n          <CardContent className=\"p-6\">\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">店舗別月額会員数</h3>\n            <div className=\"h-80\">\n              {invoiceMonthlyData.length > 0 ? (\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <LineChart data={invoiceMonthlyData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#fef3c7\" />\n                    <XAxis\n                      dataKey=\"month\"\n                      tick={{ fontSize: 12, fill: \"#6b7280\" }}\n                      axisLine={{ stroke: \"#fbbf24\" }}\n                      tickFormatter={(value: string) => {\n                        const [year, month] = value.split(\"-\")\n                        return `${year}年${month}月`\n                      }}\n                    />\n                    <YAxis tick={{ fontSize: 12, fill: \"#6b7280\" }} axisLine={{ stroke: \"#fbbf24\" }} />\n                    <Tooltip\n                      formatter={(value: number, name: string) => [`${value}人`, STORE_SHORT_NAMES[name] || name]}\n                      contentStyle={{\n                        backgroundColor: \"white\",\n                        border: \"2px solid #fbbf24\",\n                        borderRadius: \"8px\",\n                        boxShadow: \"0 4px 6px rgba(0,0,0,0.1)\",\n                      }}\n                      labelFormatter={(label: string) => {\n                        const [year, month] = label.split(\"-\")\n                        return `${year}年${month}月`\n                      }}\n                    />\n                    <Legend\n                      formatter={(value) => STORE_SHORT_NAMES[value] || value}\n                      onClick={(e) => handleLegendClick(e.dataKey as string, setHiddenStores)}\n                      wrapperStyle={{ cursor: \"pointer\" }}\n                    />\n                    {STORE_ORDER.map((store) => (\n                      <Line\n                        key={store}\n                        type=\"monotone\"\n                        dataKey={store}\n                        stroke={STORE_COLOR_MAP[store]}\n                        strokeWidth={2}\n                        dot={{ fill: STORE_COLOR_MAP[store], strokeWidth: 1, r: 2 }}\n                        activeDot={{ r: 4 }}\n                        hide={hiddenStores.has(store)}\n                      />\n                    ))}\n                  </LineChart>\n                </ResponsiveContainer>\n              ) : (\n                <div className=\"flex items-center justify-center h-full text-gray-500\">データがありません</div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-2 border-yellow-200 bg-white shadow-lg\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6\">\n              <h3 className=\"text-lg font-bold text-gray-900\">店舗別コース構成比</h3>\n              <div className=\"w-full md:w-48\">\n                <Select value={categoryPeriod} onValueChange={setCategoryPeriod}>\n                  <SelectTrigger className=\"border-2 border-yellow-300 bg-white text-gray-900 font-semibold\">\n                    <SelectValue placeholder=\"期間を選択\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {periods.map((period) => (\n                      <SelectItem key={period} value={period}>\n                        {formatPeriodLabel(period)}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            {storeCategories.length > 0 ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {storeCategories.map((storeData, storeIndex) => (\n                  <div\n                    key={storeData.store}\n                    className=\"bg-gradient-to-br from-gray-50 to-yellow-50 rounded-2xl p-4 border border-yellow-200 shadow-sm\"\n                  >\n                    {/* 店舗名ヘッダー */}\n                    <div className=\"flex items-center gap-2 mb-3\">\n                      <div\n                        className=\"w-3 h-3 rounded-full\"\n                        style={{ backgroundColor: STORE_COLORS[storeIndex % STORE_COLORS.length] }}\n                      />\n                      <h4 className=\"font-bold text-gray-800\">\n                        {STORE_SHORT_NAMES[storeData.store] || storeData.store}\n                      </h4>\n                      <span className=\"ml-auto text-sm text-gray-500\">計 {storeData.total}人</span>\n                    </div>\n\n                    {/* ドーナツチャート */}\n                    <div className=\"h-48 relative\">\n                      <ResponsiveContainer width=\"100%\" height=\"100%\">\n                        <PieChart>\n                          <Pie\n                            data={storeData.categories}\n                            cx=\"50%\"\n                            cy=\"50%\"\n                            innerRadius={45}\n                            outerRadius={70}\n                            paddingAngle={3}\n                            dataKey=\"value\"\n                            stroke=\"none\"\n                          >\n                            {storeData.categories.map((entry, index) => (\n                              <Cell\n                                key={`cell-${index}`}\n                                fill={COURSE_COLORS[entry.name] || \"#9ca3af\"}\n                                className=\"drop-shadow-sm\"\n                              />\n                            ))}\n                          </Pie>\n                          <Tooltip\n                            formatter={(value: number, name: string) => [`${value}人`, name]}\n                            contentStyle={{\n                              backgroundColor: \"white\",\n                              border: \"2px solid #fbbf24\",\n                              borderRadius: \"8px\",\n                              boxShadow: \"0 4px 6px rgba(0,0,0,0.1)\",\n                              fontSize: \"12px\",\n                            }}\n                          />\n                        </PieChart>\n                      </ResponsiveContainer>\n                      {/* 中央にトータル表示 */}\n                      <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n                        <div className=\"text-center\">\n                          <p className=\"text-2xl font-bold text-gray-800\">{storeData.total}</p>\n                          <p className=\"text-xs text-gray-500\">人</p>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* カテゴリ凡例 */}\n                    <div className=\"grid grid-cols-2 gap-2 mt-2\">\n                      {storeData.categories.map((category) => (\n                        <div key={category.name} className=\"flex items-center gap-2\">\n                          <div\n                            className=\"w-3 h-3 rounded-full flex-shrink-0\"\n                            style={{ backgroundColor: COURSE_COLORS[category.name] || \"#9ca3af\" }}\n                          />\n                          <span className=\"text-xs text-gray-600 truncate\">{category.name}</span>\n                          <span className=\"text-xs font-semibold text-gray-800 ml-auto\">{category.percentage}%</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"flex items-center justify-center h-64 text-gray-500\">データがありません</div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;;;;;;AAwDA,MAAM,cAAc;IAClB;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAM,oBAA+C;IACnD,sBAAsB;IACtB,sBAAsB;IACtB,qBAAqB;IACrB,qBAAqB;IACrB,oBAAoB;IACpB,qBAAqB;AACvB;AAEA,MAAM,eAAe;IAAC;IAAW;IAAW;IAAW;IAAW;IAAW;CAAU;AAEvF,MAAM,kBAA6C;IACjD,sBAAsB;IACtB,sBAAsB;IACtB,qBAAqB;IACrB,qBAAqB;IACrB,oBAAoB;IACpB,qBAAqB;AACvB;AAEA,MAAM,kBAA6C;IACjD,MAAM;IACN,MAAM;IACN,IAAI;IACJ,QAAQ;IACR,MAAM;IACN,QAAQ;IACR,KAAK;IACL,KAAK;AACP;AAEA,MAAM,gBAA2C;IAC/C,OAAO;IACP,KAAK;IACL,OAAO;IACP,OAAO;AACT;AAEA,MAAM,oBAAoB,CAAC,SAAiB;IAC1C,gBAAgB,CAAC;QACf,MAAM,SAAS,IAAI,IAAI;QACvB,IAAI,OAAO,GAAG,CAAC,UAAU;YACvB,OAAO,MAAM,CAAC;QAChB,OAAO;YACL,OAAO,GAAG,CAAC;QACb;QACA,OAAO;IACT;AACF;AAEe,SAAS;IACtB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,2NAAQ,EAAC;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,2NAAQ,EAAc,EAAE;IAC9D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,2NAAQ,EAAc,EAAE;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,2NAAQ,EAAc,EAAE;IAC1D,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,2NAAQ,EAAuB,EAAE;IACrF,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,2NAAQ,EAAsB,EAAE;IAC9E,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2NAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,2NAAQ,EAAc,IAAI;IAClE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,2NAAQ,EAAC;IAErD,MAAM,kBAAkB;QACtB,MAAM,UAAU,EAAE;QAClB,IAAK,IAAI,OAAO,MAAM,QAAQ,MAAM,OAAQ;YAC1C,IAAK,IAAI,QAAQ,GAAG,SAAS,IAAI,QAAS;gBACxC,QAAQ,IAAI,CAAC,GAAG,KAAK,CAAC,EAAE,OAAO,OAAO,QAAQ,CAAC,GAAG,MAAM;YAC1D;QACF;QACA,OAAO;IACT;IAEA,MAAM,UAAU;IAEhB,IAAA,4NAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAe;IAEnB,IAAA,4NAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAe;IAEnB,MAAM,YAAY;QAChB,WAAW;QACX,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,sBAAsB,EAAE,gBAAgB;YACtE,MAAM,SAAsB,MAAM,SAAS,IAAI;YAE/C,IAAI,OAAO,KAAK,IAAI,CAAC,OAAO,OAAO,IAAI,CAAC,OAAO,KAAK,EAAE;gBACpD,eAAe,EAAE;gBACjB,aAAa,EAAE;gBACf,aAAa,EAAE;gBACf,sBAAsB,EAAE;gBACxB;YACF;YAEA,MAAM,kBAAkB,OAAO,OAAO,CAAC,MAAM,CAC3C,CAAC,QAAqB,MAAM,KAAK,IAAI,MAAM,KAAK,KAAK,OAAO,MAAM,KAAK,CAAC,IAAI,OAAO;YAErF,MAAM,gBAAgB,OAAO,KAAK,CAAC,MAAM,CACvC,CAAC,QAAqB,MAAM,KAAK,IAAI,MAAM,KAAK,KAAK,OAAO,MAAM,KAAK,CAAC,IAAI,OAAO;YAGrF,MAAM,cAAc,CAAC;gBACnB,OAAO;uBAAI;iBAAK,CAAC,IAAI,CAAC,CAAC,GAAG;oBACxB,MAAM,SAAS,YAAY,OAAO,CAAC,EAAE,KAAK;oBAC1C,MAAM,SAAS,YAAY,OAAO,CAAC,EAAE,KAAK;oBAC1C,IAAI,WAAW,CAAC,KAAK,WAAW,CAAC,GAAG,OAAO;oBAC3C,IAAI,WAAW,CAAC,GAAG,OAAO;oBAC1B,IAAI,WAAW,CAAC,GAAG,OAAO,CAAC;oBAC3B,OAAO,SAAS;gBAClB;YACF;YAEA,eAAe,YAAY;YAC3B,aAAa,YAAY;YACzB,aAAa,OAAO,KAAK,IAAI,EAAE;YAC/B,sBAAsB,OAAO,cAAc,IAAI,EAAE;QACnD,EAAE,OAAO,OAAO;YACd,eAAe,EAAE;YACjB,aAAa,EAAE;YACf,aAAa,EAAE;YACf,sBAAsB,EAAE;QAC1B,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,oBAAoB;QACxB,IAAI;YACF,QAAQ,GAAG,CAAC,2CAA2C;YACvD,MAAM,WAAW,MAAM,MAAM,CAAC,sBAAsB,EAAE,eAAe,gBAAgB,CAAC;YACtF,MAAM,SAAsB,MAAM,SAAS,IAAI;YAC/C,QAAQ,GAAG,CAAC,+BAA+B;YAE3C,IAAI,OAAO,eAAe,EAAE;gBAC1B,QAAQ,GAAG,CAAC,mCAAmC,OAAO,eAAe;gBACrE,mBAAmB,OAAO,eAAe;YAC3C,OAAO;gBACL,QAAQ,GAAG,CAAC;gBACZ,mBAAmB,EAAE;YACvB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sCAAsC;YACpD,mBAAmB,EAAE;QACvB;IACF;IAEA,MAAM,oBAAoB,CAAC;QACzB,MAAM,CAAC,MAAM,MAAM,GAAG,OAAO,KAAK,CAAC;QACnC,OAAO,GAAG,KAAK,CAAC,EAAE,OAAO,QAAQ,CAAC,OAAO,CAAC,CAAC;IAC7C;IAEA,MAAM,eAAe,YAAY,MAAM,CAAC,CAAC,KAAK,QAAU,MAAM,MAAM,KAAK,EAAE;IAE3E,IAAI,SAAS;QACX,qBACE,wPAAC;YAAI,WAAU;sBACb,cAAA,wPAAC;gBAAI,WAAU;0BAA0B;;;;;;;;;;;IAG/C;IAEA,qBACE,wPAAC;QAAI,WAAU;kBACb,cAAA,wPAAC;YAAI,WAAU;;8BAEb,wPAAC;oBAAI,WAAU;;sCACb,wPAAC;;8CACC,wPAAC;oCAAG,WAAU;8CAAmC;;;;;;8CACjD,wPAAC;oCAAE,WAAU;8CAAqB;;;;;;;;;;;;sCAEpC,wPAAC;4BAAI,WAAU;sCACb,cAAA,wPAAC,+IAAM;gCAAC,OAAO;gCAAgB,eAAe;;kDAC5C,wPAAC,sJAAa;wCAAC,WAAU;kDACvB,cAAA,wPAAC,oJAAW;4CAAC,aAAY;;;;;;;;;;;kDAE3B,wPAAC,sJAAa;kDACX,QAAQ,GAAG,CAAC,CAAC,uBACZ,wPAAC,mJAAU;gDAAc,OAAO;0DAC7B,kBAAkB;+CADJ;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAU3B,wPAAC;oBAAI,WAAU;8BACZ,YAAY,GAAG,CAAC,CAAC,OAAO;wBACvB,MAAM,aAAa,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK,MAAM,KAAK;wBAChE,MAAM,aAAa,eAAe,IAAI,CAAC,AAAC,MAAM,KAAK,GAAG,eAAgB,GAAG,EAAE,OAAO,CAAC,KAAK;wBAExF,qBACE,wPAAC,2IAAI;4BAEH,WAAU;sCAEV,cAAA,wPAAC,kJAAW;gCAAC,WAAU;;kDACrB,wPAAC;wCAAI,WAAU;;0DACb,wPAAC;gDACC,WAAU;gDACV,OAAO;oDAAE,iBAAiB,YAAY,CAAC,QAAQ,aAAa,MAAM,CAAC;gDAAC;;;;;;0DAEtE,wPAAC;gDAAG,WAAU;0DACX,iBAAiB,CAAC,MAAM,KAAK,CAAC,IAAI,MAAM,KAAK;;;;;;;;;;;;kDAIlD,wPAAC;wCAAI,WAAU;;0DACb,wPAAC;gDAAI,WAAU;;kEACb,wPAAC;wDAAE,WAAU;kEAA+B;;;;;;kEAC5C,wPAAC;wDAAE,WAAU;kEAAsC,MAAM,KAAK;;;;;;kEAC9D,wPAAC;wDAAE,WAAU;kEAA0B;;;;;;;;;;;;0DAEzC,wPAAC;gDAAI,WAAU;;kEACb,wPAAC;wDAAE,WAAU;kEAA8B;;;;;;kEAC3C,wPAAC;wDAAE,WAAU;kEAAqC,YAAY,SAAS;;;;;;kEACvE,wPAAC;wDAAE,WAAU;kEAAyB;;;;;;;;;;;;;;;;;;kDAI1C,wPAAC;wCAAI,WAAU;;0DACb,wPAAC;gDAAI,WAAU;;kEACb,wPAAC;kEAAK;;;;;;kEACN,wPAAC;;4DAAM;4DAAW;;;;;;;;;;;;;0DAEpB,wPAAC;gDAAI,WAAU;0DACb,cAAA,wPAAC;oDACC,WAAU;oDACV,OAAO;wDACL,OAAO,GAAG,WAAW,CAAC,CAAC;wDACvB,iBAAiB,YAAY,CAAC,QAAQ,aAAa,MAAM,CAAC;oDAC5D;;;;;;;;;;;;;;;;;kDAKN,wPAAC;wCAAI,WAAU;;0DACb,wPAAC;gDAAE,WAAU;0DAAyC;;;;;;0DACtD,wPAAC;gDAAI,WAAU;0DACZ,OAAO,OAAO,CAAC,MAAM,KAAK,EACxB,IAAI,CAAC,CAAC,GAAG,IAAM,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAC1B,KAAK,CAAC,GAAG,GACT,GAAG,CAAC,CAAC,CAAC,MAAM,MAAM,iBACjB,wPAAC;wDAAe,WAAU;;0EACxB,wPAAC;gEAAK,WAAU;0EAA+B;;;;;;0EAC/C,wPAAC;gEAAK,WAAU;gEAAgB,OAAO;oEAAE,OAAO,eAAe,CAAC,KAAK,IAAI;gEAAU;;oEAChF;oEAAM;;;;;;;;uDAHD;;;;;;;;;;;;;;;;;;;;;;2BAlDf,MAAM,KAAK;;;;;oBA8DtB;;;;;;8BAIF,wPAAC,2IAAI;oBAAC,WAAU;8BACd,cAAA,wPAAC,kJAAW;wBAAC,WAAU;;0CACrB,wPAAC;gCAAG,WAAU;0CAAuC;;;;;;0CACrD,wPAAC;gCAAI,WAAU;0CACZ,mBAAmB,MAAM,GAAG,kBAC3B,wPAAC,oMAAmB;oCAAC,OAAM;oCAAO,QAAO;8CACvC,cAAA,wPAAC,4KAAS;wCAAC,MAAM;wCAAoB,QAAQ;4CAAE,KAAK;4CAAI,OAAO;4CAAI,MAAM;4CAAI,QAAQ;wCAAE;;0DACrF,wPAAC,wLAAa;gDAAC,iBAAgB;gDAAM,QAAO;;;;;;0DAC5C,wPAAC,wKAAK;gDACJ,SAAQ;gDACR,MAAM;oDAAE,UAAU;oDAAI,MAAM;gDAAU;gDACtC,UAAU;oDAAE,QAAQ;gDAAU;gDAC9B,eAAe,CAAC;oDACd,MAAM,CAAC,MAAM,MAAM,GAAG,MAAM,KAAK,CAAC;oDAClC,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,CAAC;gDAC5B;;;;;;0DAEF,wPAAC,wKAAK;gDAAC,MAAM;oDAAE,UAAU;oDAAI,MAAM;gDAAU;gDAAG,UAAU;oDAAE,QAAQ;gDAAU;;;;;;0DAC9E,wPAAC,4KAAO;gDACN,WAAW,CAAC,OAAe,OAAiB;wDAAC,GAAG,MAAM,CAAC,CAAC;wDAAE,iBAAiB,CAAC,KAAK,IAAI;qDAAK;gDAC1F,cAAc;oDACZ,iBAAiB;oDACjB,QAAQ;oDACR,cAAc;oDACd,WAAW;gDACb;gDACA,gBAAgB,CAAC;oDACf,MAAM,CAAC,MAAM,MAAM,GAAG,MAAM,KAAK,CAAC;oDAClC,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,CAAC;gDAC5B;;;;;;0DAEF,wPAAC,0KAAM;gDACL,WAAW,CAAC,QAAU,iBAAiB,CAAC,MAAM,IAAI;gDAClD,SAAS,CAAC,IAAM,kBAAkB,EAAE,OAAO,EAAY;gDACvD,cAAc;oDAAE,QAAQ;gDAAU;;;;;;4CAEnC,YAAY,GAAG,CAAC,CAAC,sBAChB,wPAAC,sKAAI;oDAEH,MAAK;oDACL,SAAS;oDACT,QAAQ,eAAe,CAAC,MAAM;oDAC9B,aAAa;oDACb,KAAK;wDAAE,MAAM,eAAe,CAAC,MAAM;wDAAE,aAAa;wDAAG,GAAG;oDAAE;oDAC1D,WAAW;wDAAE,GAAG;oDAAE;oDAClB,MAAM,aAAa,GAAG,CAAC;mDAPlB;;;;;;;;;;;;;;;yDAab,wPAAC;oCAAI,WAAU;8CAAwD;;;;;;;;;;;;;;;;;;;;;;8BAM/E,wPAAC,2IAAI;oBAAC,WAAU;8BACd,cAAA,wPAAC,kJAAW;wBAAC,WAAU;;0CACrB,wPAAC;gCAAI,WAAU;;kDACb,wPAAC;wCAAG,WAAU;kDAAkC;;;;;;kDAChD,wPAAC;wCAAI,WAAU;kDACb,cAAA,wPAAC,+IAAM;4CAAC,OAAO;4CAAgB,eAAe;;8DAC5C,wPAAC,sJAAa;oDAAC,WAAU;8DACvB,cAAA,wPAAC,oJAAW;wDAAC,aAAY;;;;;;;;;;;8DAE3B,wPAAC,sJAAa;8DACX,QAAQ,GAAG,CAAC,CAAC,uBACZ,wPAAC,mJAAU;4DAAc,OAAO;sEAC7B,kBAAkB;2DADJ;;;;;;;;;;;;;;;;;;;;;;;;;;;4BAS1B,gBAAgB,MAAM,GAAG,kBACxB,wPAAC;gCAAI,WAAU;0CACZ,gBAAgB,GAAG,CAAC,CAAC,WAAW,2BAC/B,wPAAC;wCAEC,WAAU;;0DAGV,wPAAC;gDAAI,WAAU;;kEACb,wPAAC;wDACC,WAAU;wDACV,OAAO;4DAAE,iBAAiB,YAAY,CAAC,aAAa,aAAa,MAAM,CAAC;wDAAC;;;;;;kEAE3E,wPAAC;wDAAG,WAAU;kEACX,iBAAiB,CAAC,UAAU,KAAK,CAAC,IAAI,UAAU,KAAK;;;;;;kEAExD,wPAAC;wDAAK,WAAU;;4DAAgC;4DAAG,UAAU,KAAK;4DAAC;;;;;;;;;;;;;0DAIrE,wPAAC;gDAAI,WAAU;;kEACb,wPAAC,oMAAmB;wDAAC,OAAM;wDAAO,QAAO;kEACvC,cAAA,wPAAC,0KAAQ;;8EACP,wPAAC,gKAAG;oEACF,MAAM,UAAU,UAAU;oEAC1B,IAAG;oEACH,IAAG;oEACH,aAAa;oEACb,aAAa;oEACb,cAAc;oEACd,SAAQ;oEACR,QAAO;8EAEN,UAAU,UAAU,CAAC,GAAG,CAAC,CAAC,OAAO,sBAChC,wPAAC,sKAAI;4EAEH,MAAM,aAAa,CAAC,MAAM,IAAI,CAAC,IAAI;4EACnC,WAAU;2EAFL,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;8EAM1B,wPAAC,4KAAO;oEACN,WAAW,CAAC,OAAe,OAAiB;4EAAC,GAAG,MAAM,CAAC,CAAC;4EAAE;yEAAK;oEAC/D,cAAc;wEACZ,iBAAiB;wEACjB,QAAQ;wEACR,cAAc;wEACd,WAAW;wEACX,UAAU;oEACZ;;;;;;;;;;;;;;;;;kEAKN,wPAAC;wDAAI,WAAU;kEACb,cAAA,wPAAC;4DAAI,WAAU;;8EACb,wPAAC;oEAAE,WAAU;8EAAoC,UAAU,KAAK;;;;;;8EAChE,wPAAC;oEAAE,WAAU;8EAAwB;;;;;;;;;;;;;;;;;;;;;;;0DAM3C,wPAAC;gDAAI,WAAU;0DACZ,UAAU,UAAU,CAAC,GAAG,CAAC,CAAC,yBACzB,wPAAC;wDAAwB,WAAU;;0EACjC,wPAAC;gEACC,WAAU;gEACV,OAAO;oEAAE,iBAAiB,aAAa,CAAC,SAAS,IAAI,CAAC,IAAI;gEAAU;;;;;;0EAEtE,wPAAC;gEAAK,WAAU;0EAAkC,SAAS,IAAI;;;;;;0EAC/D,wPAAC;gEAAK,WAAU;;oEAA+C,SAAS,UAAU;oEAAC;;;;;;;;uDAN3E,SAAS,IAAI;;;;;;;;;;;uCA7DtB,UAAU,KAAK;;;;;;;;;qDA2E1B,wPAAC;gCAAI,WAAU;0CAAsD;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOnF"}},
    {"offset": {"line": 1314, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/components/sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport {\n  LayoutDashboard,\n  FileSpreadsheet,\n  ClipboardList,\n  Package,\n  CalendarDays,\n  Menu,\n  X,\n  ExternalLink,\n  LogOut,\n  Store,\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { useAuth } from \"@/components/auth-provider\"\n\nconst menuItems = [\n  {\n    name: \"ダッシュボード\",\n    href: \"/\",\n    icon: LayoutDashboard,\n    external: false,\n  },\n  {\n    name: \"スプレッドシート\",\n    href: \"/spreadsheet\",\n    icon: FileSpreadsheet,\n    external: false,\n  },\n  {\n    name: \"行事カレンダー\",\n    href: \"/calendar\",\n    icon: CalendarDays,\n    external: false,\n  },\n  {\n    name: \"日報\",\n    href: \"https://www.appsheet.com/start/43947cc3-3995-4964-9245-9131aa293b5e\",\n    icon: ClipboardList,\n    external: true,\n  },\n  {\n    name: \"備品発注\",\n    href: \"https://kawam0t0-orderwebapp20250502.vercel.app/login\",\n    icon: Package,\n    external: true,\n  },\n  {\n    name: \"シフト\",\n    href: \"https://connect.airregi.jp/login?client_id=SFT&redirect_uri=https%3A%2F%2Fconnect.airregi.jp%2Foauth%2Fauthorize%3Fclient_id%3DSFT%26redirect_uri%3Dhttps%253A%252F%252Fairshift.jp%252Fsft%252Fcallback%26response_type%3Dcode%26state%3DredirectTo%253A%25252Fsft%25252F\",\n    icon: ExternalLink,\n    external: true,\n  },\n]\n\nexport function Sidebar() {\n  const [isOpen, setIsOpen] = useState(false)\n  const pathname = usePathname()\n  const { session, logout } = useAuth()\n\n  const handleLogout = async () => {\n    setIsOpen(false)\n    await logout()\n  }\n\n  return (\n    <>\n      <button\n        onClick={() => setIsOpen(true)}\n        className=\"fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-md\"\n        aria-label=\"メニューを開く\"\n      >\n        <Menu className=\"h-6 w-6 text-gray-700\" />\n      </button>\n\n      {isOpen && <div className=\"fixed inset-0 bg-black/50 z-40\" onClick={() => setIsOpen(false)} />}\n\n      <aside\n        className={cn(\n          \"fixed top-0 left-0 z-50 h-full w-64 bg-yellow-400 shadow-lg transform transition-transform duration-300 ease-in-out flex flex-col\",\n          isOpen ? \"translate-x-0\" : \"-translate-x-full\",\n        )}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b border-yellow-500\">\n          <h1 className=\"text-lg font-bold text-gray-900\">ONEAPP</h1>\n          <button\n            onClick={() => setIsOpen(false)}\n            className=\"p-1 rounded-md hover:bg-yellow-500\"\n            aria-label=\"メニューを閉じる\"\n          >\n            <X className=\"h-5 w-5 text-gray-700\" />\n          </button>\n        </div>\n\n        {session && (\n          <div className=\"px-4 py-3 border-b border-yellow-500 bg-yellow-300\">\n            <div className=\"flex items-center gap-2 text-gray-800\">\n              <Store className=\"h-4 w-4\" />\n              <span className=\"text-sm font-medium truncate\">{session.store_name}</span>\n            </div>\n          </div>\n        )}\n\n        <nav className=\"flex-1 p-4 space-y-2\">\n          {menuItems.map((item) => {\n            const isActive = pathname === item.href\n            const Icon = item.icon\n\n            if (item.external) {\n              return (\n                <a\n                  key={item.name}\n                  href={item.href}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={cn(\n                    \"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-800 hover:bg-yellow-500 transition-colors\",\n                  )}\n                  onClick={() => setIsOpen(false)}\n                >\n                  <Icon className=\"h-5 w-5\" />\n                  <span className=\"flex-1\">{item.name}</span>\n                  <ExternalLink className=\"h-4 w-4 text-gray-600\" />\n                </a>\n              )\n            }\n\n            return (\n              <Link\n                key={item.name}\n                href={item.href}\n                className={cn(\n                  \"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors\",\n                  isActive ? \"bg-gray-900 text-white font-semibold\" : \"text-gray-800 hover:bg-yellow-500\",\n                )}\n                onClick={() => setIsOpen(false)}\n              >\n                <Icon className=\"h-5 w-5\" />\n                <span>{item.name}</span>\n              </Link>\n            )\n          })}\n        </nav>\n\n        <div className=\"p-4 border-t border-yellow-500\">\n          <button\n            onClick={handleLogout}\n            className=\"flex items-center gap-3 w-full px-4 py-3 rounded-lg text-gray-800 hover:bg-red-500 hover:text-white transition-colors\"\n          >\n            <LogOut className=\"h-5 w-5\" />\n            <span>ログアウト</span>\n          </button>\n        </div>\n      </aside>\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AACA;AAlBA;;;;;;;;AAoBA,MAAM,YAAY;IAChB;QACE,MAAM;QACN,MAAM;QACN,MAAM,yPAAe;QACrB,UAAU;IACZ;IACA;QACE,MAAM;QACN,MAAM;QACN,MAAM,yPAAe;QACrB,UAAU;IACZ;IACA;QACE,MAAM;QACN,MAAM;QACN,MAAM,gPAAY;QAClB,UAAU;IACZ;IACA;QACE,MAAM;QACN,MAAM;QACN,MAAM,mPAAa;QACnB,UAAU;IACZ;IACA;QACE,MAAM;QACN,MAAM;QACN,MAAM,6NAAO;QACb,UAAU;IACZ;IACA;QACE,MAAM;QACN,MAAM;QACN,MAAM,gPAAY;QAClB,UAAU;IACZ;CACD;AAEM,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,2NAAQ,EAAC;IACrC,MAAM,WAAW,IAAA,2JAAW;IAC5B,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,oJAAO;IAEnC,MAAM,eAAe;QACnB,UAAU;QACV,MAAM;IACR;IAEA,qBACE;;0BACE,wPAAC;gBACC,SAAS,IAAM,UAAU;gBACzB,WAAU;gBACV,cAAW;0BAEX,cAAA,wPAAC,oNAAI;oBAAC,WAAU;;;;;;;;;;;YAGjB,wBAAU,wPAAC;gBAAI,WAAU;gBAAiC,SAAS,IAAM,UAAU;;;;;;0BAEpF,wPAAC;gBACC,WAAW,IAAA,4HAAE,EACX,qIACA,SAAS,kBAAkB;;kCAG7B,wPAAC;wBAAI,WAAU;;0CACb,wPAAC;gCAAG,WAAU;0CAAkC;;;;;;0CAChD,wPAAC;gCACC,SAAS,IAAM,UAAU;gCACzB,WAAU;gCACV,cAAW;0CAEX,cAAA,wPAAC,2MAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;oBAIhB,yBACC,wPAAC;wBAAI,WAAU;kCACb,cAAA,wPAAC;4BAAI,WAAU;;8CACb,wPAAC,uNAAK;oCAAC,WAAU;;;;;;8CACjB,wPAAC;oCAAK,WAAU;8CAAgC,QAAQ,UAAU;;;;;;;;;;;;;;;;;kCAKxE,wPAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC;4BACd,MAAM,WAAW,aAAa,KAAK,IAAI;4BACvC,MAAM,OAAO,KAAK,IAAI;4BAEtB,IAAI,KAAK,QAAQ,EAAE;gCACjB,qBACE,wPAAC;oCAEC,MAAM,KAAK,IAAI;oCACf,QAAO;oCACP,KAAI;oCACJ,WAAW,IAAA,4HAAE,EACX;oCAEF,SAAS,IAAM,UAAU;;sDAEzB,wPAAC;4CAAK,WAAU;;;;;;sDAChB,wPAAC;4CAAK,WAAU;sDAAU,KAAK,IAAI;;;;;;sDACnC,wPAAC,gPAAY;4CAAC,WAAU;;;;;;;mCAXnB,KAAK,IAAI;;;;;4BAcpB;4BAEA,qBACE,wPAAC,iLAAI;gCAEH,MAAM,KAAK,IAAI;gCACf,WAAW,IAAA,4HAAE,EACX,kEACA,WAAW,yCAAyC;gCAEtD,SAAS,IAAM,UAAU;;kDAEzB,wPAAC;wCAAK,WAAU;;;;;;kDAChB,wPAAC;kDAAM,KAAK,IAAI;;;;;;;+BATX,KAAK,IAAI;;;;;wBAYpB;;;;;;kCAGF,wPAAC;wBAAI,WAAU;kCACb,cAAA,wPAAC;4BACC,SAAS;4BACT,WAAU;;8CAEV,wPAAC,8NAAM;oCAAC,WAAU;;;;;;8CAClB,wPAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;;;AAMlB"}},
    {"offset": {"line": 1598, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/components/notification-detail-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport { X } from \"lucide-react\"\nimport { useEffect, useState } from \"react\"\n\ninterface Notification {\n  id: number\n  title: string\n  message: string\n  image_url?: string\n  created_at: string\n  is_read: boolean\n}\n\ninterface NotificationDetailDialogProps {\n  notification: Notification | null\n  isOpen: boolean\n  onClose: () => void\n}\n\nexport function NotificationDetailDialog({ notification, isOpen, onClose }: NotificationDetailDialogProps) {\n  const [isImageExpanded, setIsImageExpanded] = useState(false)\n\n  // ESCキーで閉じる\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        if (isImageExpanded) {\n          setIsImageExpanded(false)\n        } else {\n          onClose()\n        }\n      }\n    }\n    if (isOpen) {\n      document.addEventListener(\"keydown\", handleEsc)\n      document.body.style.overflow = \"hidden\"\n    }\n    return () => {\n      document.removeEventListener(\"keydown\", handleEsc)\n      document.body.style.overflow = \"\"\n    }\n  }, [isOpen, onClose, isImageExpanded])\n\n  // ダイアログが閉じたら画像拡大も閉じる\n  useEffect(() => {\n    if (!isOpen) {\n      setIsImageExpanded(false)\n    }\n  }, [isOpen])\n\n  if (!isOpen || !notification) return null\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString)\n    return date.toLocaleDateString(\"ja-JP\", {\n      timeZone: \"Asia/Tokyo\",\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    })\n  }\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-[100] flex items-center justify-center\">\n        {/* オーバーレイ */}\n        <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\" onClick={onClose} />\n\n        {/* ダイアログ */}\n        <div className=\"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden\">\n          {/* ヘッダー */}\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-yellow-400\">\n            <h2 className=\"font-bold text-gray-900 text-lg\">お知らせ詳細</h2>\n            <button onClick={onClose} className=\"p-1.5 rounded-md hover:bg-yellow-500 transition-colors\">\n              <X className=\"h-5 w-5 text-gray-900\" />\n            </button>\n          </div>\n\n          {/* コンテンツ */}\n          <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-80px)]\">\n            <h3 className=\"text-xl font-bold text-gray-900 mb-2\">{notification.title}</h3>\n            <p className=\"text-sm text-gray-500 mb-4\">{formatDate(notification.created_at)}</p>\n\n            {/* 本文（プレーンテキストとして表示、改行を保持） */}\n            <div className=\"text-gray-700 whitespace-pre-wrap\">{notification.message}</div>\n\n            {notification.image_url && (\n              <div className=\"mt-4\">\n                <p className=\"text-xs text-gray-500 mb-2\">画像をダブルクリックで拡大表示</p>\n                <img\n                  src={notification.image_url || \"/placeholder.svg\"}\n                  alt=\"添付画像\"\n                  className=\"w-full rounded-lg border border-gray-200 cursor-pointer hover:opacity-90 transition-opacity\"\n                  onDoubleClick={() => setIsImageExpanded(true)}\n                />\n              </div>\n            )}\n          </div>\n\n          {/* フッター */}\n          <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\n            <button\n              onClick={onClose}\n              className=\"w-full py-2.5 bg-gray-900 hover:bg-gray-800 text-white font-medium rounded-lg transition-colors\"\n            >\n              閉じる\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {isImageExpanded && notification.image_url && (\n        <div\n          className=\"fixed inset-0 z-[200] flex items-center justify-center bg-black/90\"\n          onClick={() => setIsImageExpanded(false)}\n        >\n          <button\n            onClick={() => setIsImageExpanded(false)}\n            className=\"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors\"\n          >\n            <X className=\"h-6 w-6 text-white\" />\n          </button>\n          <img\n            src={notification.image_url || \"/placeholder.svg\"}\n            alt=\"拡大画像\"\n            className=\"max-w-[95vw] max-h-[95vh] object-contain rounded-lg\"\n            onClick={(e) => e.stopPropagation()}\n          />\n          <p className=\"absolute bottom-4 left-1/2 -translate-x-1/2 text-white/70 text-sm\">\n            クリックまたはESCキーで閉じる\n          </p>\n        </div>\n      )}\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAoBO,SAAS,yBAAyB,EAAE,YAAY,EAAE,MAAM,EAAE,OAAO,EAAiC;IACvG,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,2NAAQ,EAAC;IAEvD,YAAY;IACZ,IAAA,4NAAS,EAAC;QACR,MAAM,YAAY,CAAC;YACjB,IAAI,EAAE,GAAG,KAAK,UAAU;gBACtB,IAAI,iBAAiB;oBACnB,mBAAmB;gBACrB,OAAO;oBACL;gBACF;YACF;QACF;QACA,IAAI,QAAQ;YACV,SAAS,gBAAgB,CAAC,WAAW;YACrC,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;QACA,OAAO;YACL,SAAS,mBAAmB,CAAC,WAAW;YACxC,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;IACF,GAAG;QAAC;QAAQ;QAAS;KAAgB;IAErC,qBAAqB;IACrB,IAAA,4NAAS,EAAC;QACR,IAAI,CAAC,QAAQ;YACX,mBAAmB;QACrB;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,CAAC,UAAU,CAAC,cAAc,OAAO;IAErC,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC,SAAS;YACtC,UAAU;YACV,MAAM;YACN,OAAO;YACP,KAAK;YACL,MAAM;YACN,QAAQ;QACV;IACF;IAEA,qBACE;;0BACE,wPAAC;gBAAI,WAAU;;kCAEb,wPAAC;wBAAI,WAAU;wBAAgD,SAAS;;;;;;kCAGxE,wPAAC;wBAAI,WAAU;;0CAEb,wPAAC;gCAAI,WAAU;;kDACb,wPAAC;wCAAG,WAAU;kDAAkC;;;;;;kDAChD,wPAAC;wCAAO,SAAS;wCAAS,WAAU;kDAClC,cAAA,wPAAC,2MAAC;4CAAC,WAAU;;;;;;;;;;;;;;;;;0CAKjB,wPAAC;gCAAI,WAAU;;kDACb,wPAAC;wCAAG,WAAU;kDAAwC,aAAa,KAAK;;;;;;kDACxE,wPAAC;wCAAE,WAAU;kDAA8B,WAAW,aAAa,UAAU;;;;;;kDAG7E,wPAAC;wCAAI,WAAU;kDAAqC,aAAa,OAAO;;;;;;oCAEvE,aAAa,SAAS,kBACrB,wPAAC;wCAAI,WAAU;;0DACb,wPAAC;gDAAE,WAAU;0DAA6B;;;;;;0DAC1C,wPAAC;gDACC,KAAK,aAAa,SAAS,IAAI;gDAC/B,KAAI;gDACJ,WAAU;gDACV,eAAe,IAAM,mBAAmB;;;;;;;;;;;;;;;;;;0CAOhD,wPAAC;gCAAI,WAAU;0CACb,cAAA,wPAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;YAON,mBAAmB,aAAa,SAAS,kBACxC,wPAAC;gBACC,WAAU;gBACV,SAAS,IAAM,mBAAmB;;kCAElC,wPAAC;wBACC,SAAS,IAAM,mBAAmB;wBAClC,WAAU;kCAEV,cAAA,wPAAC,2MAAC;4BAAC,WAAU;;;;;;;;;;;kCAEf,wPAAC;wBACC,KAAK,aAAa,SAAS,IAAI;wBAC/B,KAAI;wBACJ,WAAU;wBACV,SAAS,CAAC,IAAM,EAAE,eAAe;;;;;;kCAEnC,wPAAC;wBAAE,WAAU;kCAAoE;;;;;;;;;;;;;;AAO3F"}},
    {"offset": {"line": 1841, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/components/notification-bell.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { Bell, X, Plus } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { NotificationDetailDialog } from \"./notification-detail-dialog\"\n\ninterface Notification {\n  id: number\n  title: string\n  message: string\n  image_url?: string\n  created_at: string\n  is_read: boolean\n}\n\nexport function NotificationBell() {\n  const [notifications, setNotifications] = useState<Notification[]>([])\n  const [isOpen, setIsOpen] = useState(false)\n  const [unreadCount, setUnreadCount] = useState(0)\n  const [selectedNotification, setSelectedNotification] = useState<Notification | null>(null)\n  const [isDialogOpen, setIsDialogOpen] = useState(false)\n  const dropdownRef = useRef<HTMLDivElement>(null)\n\n  // 通知を取得\n  const fetchNotifications = async () => {\n    try {\n      const res = await fetch(\"/api/notifications\")\n      if (res.ok) {\n        const data = await res.json()\n        if (Array.isArray(data)) {\n          setNotifications(data)\n          setUnreadCount(data.filter((n: Notification) => !n.is_read).length)\n        }\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch notifications:\", error)\n    }\n  }\n\n  // 全て既読にする\n  const markAllAsRead = async () => {\n    try {\n      const res = await fetch(\"/api/notifications/read-all\", { method: \"POST\" })\n      if (res.ok) {\n        setNotifications((prev) => prev.map((n) => ({ ...n, is_read: true })))\n        setUnreadCount(0)\n      }\n    } catch (error) {\n      console.error(\"Failed to mark all as read:\", error)\n    }\n  }\n\n  // 個別の通知を既読にする\n  const markAsRead = async (id: number) => {\n    try {\n      await fetch(`/api/notifications/${id}/read`, { method: \"POST\" })\n      setNotifications((prev) => prev.map((n) => (n.id === id ? { ...n, is_read: true } : n)))\n      setUnreadCount((prev) => Math.max(0, prev - 1))\n    } catch (error) {\n      console.error(\"Failed to mark as read:\", error)\n    }\n  }\n\n  // 通知をクリックして詳細を表示\n  const handleNotificationClick = (notification: Notification) => {\n    setSelectedNotification(notification)\n    setIsDialogOpen(true)\n    if (!notification.is_read) {\n      markAsRead(notification.id)\n    }\n  }\n\n  useEffect(() => {\n    fetchNotifications()\n  }, [])\n\n  // ドロップダウン外クリックで閉じる\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  const formatDate = (dateString: string) => {\n    if (!dateString) return \"\"\n\n    try {\n      // MySQLの日付形式 \"YYYY-MM-DD HH:mm:ss\" をパース\n      const cleanDateString = dateString.replace(\" \", \"T\")\n      const date = new Date(cleanDateString)\n\n      // Invalid Date チェック\n      if (isNaN(date.getTime())) {\n        console.log(\"[v0] Invalid date string:\", dateString)\n        return \"\"\n      }\n\n      return date.toLocaleDateString(\"ja-JP\", {\n        timeZone: \"Asia/Tokyo\",\n        month: \"numeric\",\n        day: \"numeric\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      })\n    } catch (error) {\n      console.log(\"[v0] Date parse error:\", error)\n      return \"\"\n    }\n  }\n\n  return (\n    <>\n      <div className=\"relative\" ref={dropdownRef}>\n        {/* ベルアイコン */}\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className=\"relative p-2 rounded-full hover:bg-gray-100 transition-colors\"\n          aria-label=\"お知らせ\"\n        >\n          <Bell className=\"h-6 w-6 text-gray-700\" />\n          {/* 未読バッジ */}\n          {unreadCount > 0 && (\n            <span className=\"absolute top-0 right-0 h-5 w-5 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold\">\n              {unreadCount > 9 ? \"9+\" : unreadCount}\n            </span>\n          )}\n        </button>\n\n        {/* ドロップダウン */}\n        {isOpen && (\n          <div className=\"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50\">\n            {/* ヘッダー */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n              <h3 className=\"font-bold text-gray-900\">お知らせ</h3>\n              <div className=\"flex items-center gap-2\">\n                <Link\n                  href=\"/notifications/create\"\n                  className=\"p-1.5 rounded-md hover:bg-yellow-100 text-yellow-600\"\n                  title=\"お知らせを作成\"\n                  onClick={() => setIsOpen(false)}\n                >\n                  <Plus className=\"h-5 w-5\" />\n                </Link>\n                <button onClick={() => setIsOpen(false)} className=\"p-1.5 rounded-md hover:bg-gray-100\">\n                  <X className=\"h-5 w-5 text-gray-500\" />\n                </button>\n              </div>\n            </div>\n\n            {/* 通知リスト */}\n            <div className=\"max-h-80 overflow-y-auto\">\n              {notifications.length === 0 ? (\n                <div className=\"p-4 text-center text-gray-500\">お知らせはありません</div>\n              ) : (\n                notifications.map((notification) => (\n                  <button\n                    key={notification.id}\n                    onClick={() => handleNotificationClick(notification)}\n                    className={`w-full text-left p-4 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors ${\n                      !notification.is_read ? \"bg-yellow-50\" : \"\"\n                    }`}\n                  >\n                    <div className=\"flex items-start gap-2\">\n                      {!notification.is_read && (\n                        <span className=\"mt-1.5 h-2 w-2 bg-red-500 rounded-full flex-shrink-0\" />\n                      )}\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-semibold text-gray-900 text-sm\">{notification.title}</h4>\n                        <p className=\"text-gray-600 text-sm mt-1 line-clamp-2\">\n                          {notification.message.replace(/<[^>]*>/g, \"\")}\n                        </p>\n                        <span className=\"text-gray-400 text-xs mt-2 block\">{formatDate(notification.created_at)}</span>\n                      </div>\n                    </div>\n                  </button>\n                ))\n              )}\n            </div>\n\n            {/* フッター */}\n            {notifications.length > 0 && unreadCount > 0 && (\n              <div className=\"p-3 border-t border-gray-200\">\n                <button\n                  onClick={markAllAsRead}\n                  className=\"w-full py-2 text-sm text-yellow-600 hover:text-yellow-700 font-medium\"\n                >\n                  すべて既読にする\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* 詳細ダイアログ */}\n      <NotificationDetailDialog\n        notification={selectedNotification}\n        isOpen={isDialogOpen}\n        onClose={() => {\n          setIsDialogOpen(false)\n          setSelectedNotification(null)\n        }}\n      />\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2167, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/components/app-layout.tsx"],"sourcesContent":["\"use client\"\n\nimport type { ReactNode } from \"react\"\nimport { Sidebar } from \"./sidebar\"\nimport { NotificationBell } from \"./notification-bell\"\n\ninterface AppLayoutProps {\n  children: ReactNode\n}\n\nexport function AppLayout({ children }: AppLayoutProps) {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* サイドバー */}\n      <Sidebar />\n\n      {/* メインコンテンツ */}\n      <div className=\"flex-1 flex flex-col min-h-screen\">\n        {/* ヘッダー（通知アイコン用） */}\n        <header className=\"sticky top-0 z-30 bg-white border-b border-gray-200 px-4 py-3\">\n          <div className=\"flex items-center justify-end\">\n            {/* ハンバーガーメニュー分のスペーサー */}\n            <div className=\"w-10\" />\n            <div className=\"flex-1\" />\n            <NotificationBell />\n          </div>\n        </header>\n\n        {/* ページコンテンツ */}\n        <main className=\"flex-1 p-4\">{children}</main>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAUO,SAAS,UAAU,EAAE,QAAQ,EAAkB;IACpD,qBACE,wPAAC;QAAI,WAAU;;0BAEb,wPAAC,2IAAO;;;;;0BAGR,wPAAC;gBAAI,WAAU;;kCAEb,wPAAC;wBAAO,WAAU;kCAChB,cAAA,wPAAC;4BAAI,WAAU;;8CAEb,wPAAC;oCAAI,WAAU;;;;;;8CACf,wPAAC;oCAAI,WAAU;;;;;;8CACf,wPAAC,iKAAgB;;;;;;;;;;;;;;;;kCAKrB,wPAAC;wBAAK,WAAU;kCAAc;;;;;;;;;;;;;;;;;;AAItC"}}]
}