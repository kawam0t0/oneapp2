{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,gLAAO,EAAC,IAAA,uJAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/components/sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport {\n  LayoutDashboard,\n  FileSpreadsheet,\n  ClipboardList,\n  Package,\n  CalendarDays,\n  Menu,\n  X,\n  ExternalLink,\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\nconst menuItems = [\n  {\n    name: \"ダッシュボード\",\n    href: \"/\",\n    icon: LayoutDashboard,\n    external: false,\n  },\n  {\n    name: \"スプレッドシート\",\n    href: \"/spreadsheet\",\n    icon: FileSpreadsheet,\n    external: false,\n  },\n  {\n    name: \"行事カレンダー\",\n    href: \"/calendar\",\n    icon: CalendarDays,\n    external: false,\n  },\n  {\n    name: \"日報\",\n    href: \"https://www.appsheet.com/start/43947cc3-3995-4964-9245-9131aa293b5e\",\n    icon: ClipboardList,\n    external: true,\n  },\n  {\n    name: \"備品発注\",\n    href: \"https://kawam0t0-orderwebapp20250502.vercel.app/login\",\n    icon: Package,\n    external: true,\n  },\n  {\n    name: \"シフト\",\n    href: \"https://connect.airregi.jp/login?client_id=SFT&redirect_uri=https%3A%2F%2Fconnect.airregi.jp%2Foauth%2Fauthorize%3Fclient_id%3DSFT%26redirect_uri%3Dhttps%253A%252F%252Fairshift.jp%252Fsft%252Fcallback%26response_type%3Dcode%26state%3DredirectTo%253A%25252Fsft%25252F\",\n    icon: ExternalLink,\n    external: true,\n  },\n]\n\nexport function Sidebar() {\n  const [isOpen, setIsOpen] = useState(false)\n  const pathname = usePathname()\n\n  return (\n    <>\n      <button\n        onClick={() => setIsOpen(true)}\n        className=\"fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-md\"\n        aria-label=\"メニューを開く\"\n      >\n        <Menu className=\"h-6 w-6 text-gray-700\" />\n      </button>\n\n      {isOpen && <div className=\"fixed inset-0 bg-black/50 z-40\" onClick={() => setIsOpen(false)} />}\n\n      <aside\n        className={cn(\n          \"fixed top-0 left-0 z-50 h-full w-64 bg-yellow-400 shadow-lg transform transition-transform duration-300 ease-in-out\",\n          isOpen ? \"translate-x-0\" : \"-translate-x-full\",\n        )}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b border-yellow-500\">\n          <h1 className=\"text-lg font-bold text-gray-900\">ONEAPP</h1>\n          <button\n            onClick={() => setIsOpen(false)}\n            className=\"p-1 rounded-md hover:bg-yellow-500\"\n            aria-label=\"メニューを閉じる\"\n          >\n            <X className=\"h-5 w-5 text-gray-700\" />\n          </button>\n        </div>\n\n        <nav className=\"p-4 space-y-2\">\n          {menuItems.map((item) => {\n            const isActive = pathname === item.href\n            const Icon = item.icon\n\n            if (item.external) {\n              return (\n                <a\n                  key={item.name}\n                  href={item.href}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={cn(\n                    \"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-800 hover:bg-yellow-500 transition-colors\",\n                  )}\n                  onClick={() => setIsOpen(false)}\n                >\n                  <Icon className=\"h-5 w-5\" />\n                  <span className=\"flex-1\">{item.name}</span>\n                  <ExternalLink className=\"h-4 w-4 text-gray-600\" />\n                </a>\n              )\n            }\n\n            return (\n              <Link\n                key={item.name}\n                href={item.href}\n                className={cn(\n                  \"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors\",\n                  isActive ? \"bg-gray-900 text-white font-semibold\" : \"text-gray-800 hover:bg-yellow-500\",\n                )}\n                onClick={() => setIsOpen(false)}\n              >\n                <Icon className=\"h-5 w-5\" />\n                <span>{item.name}</span>\n              </Link>\n            )\n          })}\n        </nav>\n      </aside>\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAfA;;;;;;;AAiBA,MAAM,YAAY;IAChB;QACE,MAAM;QACN,MAAM;QACN,MAAM,yPAAe;QACrB,UAAU;IACZ;IACA;QACE,MAAM;QACN,MAAM;QACN,MAAM,yPAAe;QACrB,UAAU;IACZ;IACA;QACE,MAAM;QACN,MAAM;QACN,MAAM,gPAAY;QAClB,UAAU;IACZ;IACA;QACE,MAAM;QACN,MAAM;QACN,MAAM,mPAAa;QACnB,UAAU;IACZ;IACA;QACE,MAAM;QACN,MAAM;QACN,MAAM,6NAAO;QACb,UAAU;IACZ;IACA;QACE,MAAM;QACN,MAAM;QACN,MAAM,gPAAY;QAClB,UAAU;IACZ;CACD;AAEM,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,2NAAQ,EAAC;IACrC,MAAM,WAAW,IAAA,2JAAW;IAE5B,qBACE;;0BACE,wPAAC;gBACC,SAAS,IAAM,UAAU;gBACzB,WAAU;gBACV,cAAW;0BAEX,cAAA,wPAAC,oNAAI;oBAAC,WAAU;;;;;;;;;;;YAGjB,wBAAU,wPAAC;gBAAI,WAAU;gBAAiC,SAAS,IAAM,UAAU;;;;;;0BAEpF,wPAAC;gBACC,WAAW,IAAA,4HAAE,EACX,uHACA,SAAS,kBAAkB;;kCAG7B,wPAAC;wBAAI,WAAU;;0CACb,wPAAC;gCAAG,WAAU;0CAAkC;;;;;;0CAChD,wPAAC;gCACC,SAAS,IAAM,UAAU;gCACzB,WAAU;gCACV,cAAW;0CAEX,cAAA,wPAAC,2MAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAIjB,wPAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC;4BACd,MAAM,WAAW,aAAa,KAAK,IAAI;4BACvC,MAAM,OAAO,KAAK,IAAI;4BAEtB,IAAI,KAAK,QAAQ,EAAE;gCACjB,qBACE,wPAAC;oCAEC,MAAM,KAAK,IAAI;oCACf,QAAO;oCACP,KAAI;oCACJ,WAAW,IAAA,4HAAE,EACX;oCAEF,SAAS,IAAM,UAAU;;sDAEzB,wPAAC;4CAAK,WAAU;;;;;;sDAChB,wPAAC;4CAAK,WAAU;sDAAU,KAAK,IAAI;;;;;;sDACnC,wPAAC,gPAAY;4CAAC,WAAU;;;;;;;mCAXnB,KAAK,IAAI;;;;;4BAcpB;4BAEA,qBACE,wPAAC,iLAAI;gCAEH,MAAM,KAAK,IAAI;gCACf,WAAW,IAAA,4HAAE,EACX,kEACA,WAAW,yCAAyC;gCAEtD,SAAS,IAAM,UAAU;;kDAEzB,wPAAC;wCAAK,WAAU;;;;;;kDAChB,wPAAC;kDAAM,KAAK,IAAI;;;;;;;+BATX,KAAK,IAAI;;;;;wBAYpB;;;;;;;;;;;;;;AAKV"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/components/notification-detail-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport { X } from \"lucide-react\"\nimport { useEffect, useState } from \"react\"\n\ninterface Notification {\n  id: number\n  title: string\n  message: string\n  image_url?: string\n  created_at: string\n  is_read: boolean\n}\n\ninterface NotificationDetailDialogProps {\n  notification: Notification | null\n  isOpen: boolean\n  onClose: () => void\n}\n\nexport function NotificationDetailDialog({ notification, isOpen, onClose }: NotificationDetailDialogProps) {\n  const [isImageExpanded, setIsImageExpanded] = useState(false)\n\n  // ESCキーで閉じる\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        if (isImageExpanded) {\n          setIsImageExpanded(false)\n        } else {\n          onClose()\n        }\n      }\n    }\n    if (isOpen) {\n      document.addEventListener(\"keydown\", handleEsc)\n      document.body.style.overflow = \"hidden\"\n    }\n    return () => {\n      document.removeEventListener(\"keydown\", handleEsc)\n      document.body.style.overflow = \"\"\n    }\n  }, [isOpen, onClose, isImageExpanded])\n\n  // ダイアログが閉じたら画像拡大も閉じる\n  useEffect(() => {\n    if (!isOpen) {\n      setIsImageExpanded(false)\n    }\n  }, [isOpen])\n\n  if (!isOpen || !notification) return null\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString)\n    return date.toLocaleDateString(\"ja-JP\", {\n      timeZone: \"Asia/Tokyo\",\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    })\n  }\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-[100] flex items-center justify-center\">\n        {/* オーバーレイ */}\n        <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\" onClick={onClose} />\n\n        {/* ダイアログ */}\n        <div className=\"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden\">\n          {/* ヘッダー */}\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-yellow-400\">\n            <h2 className=\"font-bold text-gray-900 text-lg\">お知らせ詳細</h2>\n            <button onClick={onClose} className=\"p-1.5 rounded-md hover:bg-yellow-500 transition-colors\">\n              <X className=\"h-5 w-5 text-gray-900\" />\n            </button>\n          </div>\n\n          {/* コンテンツ */}\n          <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-80px)]\">\n            <h3 className=\"text-xl font-bold text-gray-900 mb-2\">{notification.title}</h3>\n            <p className=\"text-sm text-gray-500 mb-4\">{formatDate(notification.created_at)}</p>\n\n            {/* 本文（プレーンテキストとして表示、改行を保持） */}\n            <div className=\"text-gray-700 whitespace-pre-wrap\">{notification.message}</div>\n\n            {notification.image_url && (\n              <div className=\"mt-4\">\n                <p className=\"text-xs text-gray-500 mb-2\">画像をダブルクリックで拡大表示</p>\n                <img\n                  src={notification.image_url || \"/placeholder.svg\"}\n                  alt=\"添付画像\"\n                  className=\"w-full rounded-lg border border-gray-200 cursor-pointer hover:opacity-90 transition-opacity\"\n                  onDoubleClick={() => setIsImageExpanded(true)}\n                />\n              </div>\n            )}\n          </div>\n\n          {/* フッター */}\n          <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\n            <button\n              onClick={onClose}\n              className=\"w-full py-2.5 bg-gray-900 hover:bg-gray-800 text-white font-medium rounded-lg transition-colors\"\n            >\n              閉じる\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {isImageExpanded && notification.image_url && (\n        <div\n          className=\"fixed inset-0 z-[200] flex items-center justify-center bg-black/90\"\n          onClick={() => setIsImageExpanded(false)}\n        >\n          <button\n            onClick={() => setIsImageExpanded(false)}\n            className=\"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors\"\n          >\n            <X className=\"h-6 w-6 text-white\" />\n          </button>\n          <img\n            src={notification.image_url || \"/placeholder.svg\"}\n            alt=\"拡大画像\"\n            className=\"max-w-[95vw] max-h-[95vh] object-contain rounded-lg\"\n            onClick={(e) => e.stopPropagation()}\n          />\n          <p className=\"absolute bottom-4 left-1/2 -translate-x-1/2 text-white/70 text-sm\">\n            クリックまたはESCキーで閉じる\n          </p>\n        </div>\n      )}\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAoBO,SAAS,yBAAyB,EAAE,YAAY,EAAE,MAAM,EAAE,OAAO,EAAiC;IACvG,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,2NAAQ,EAAC;IAEvD,YAAY;IACZ,IAAA,4NAAS,EAAC;QACR,MAAM,YAAY,CAAC;YACjB,IAAI,EAAE,GAAG,KAAK,UAAU;gBACtB,IAAI,iBAAiB;oBACnB,mBAAmB;gBACrB,OAAO;oBACL;gBACF;YACF;QACF;QACA,IAAI,QAAQ;YACV,SAAS,gBAAgB,CAAC,WAAW;YACrC,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;QACA,OAAO;YACL,SAAS,mBAAmB,CAAC,WAAW;YACxC,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;IACF,GAAG;QAAC;QAAQ;QAAS;KAAgB;IAErC,qBAAqB;IACrB,IAAA,4NAAS,EAAC;QACR,IAAI,CAAC,QAAQ;YACX,mBAAmB;QACrB;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,CAAC,UAAU,CAAC,cAAc,OAAO;IAErC,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC,SAAS;YACtC,UAAU;YACV,MAAM;YACN,OAAO;YACP,KAAK;YACL,MAAM;YACN,QAAQ;QACV;IACF;IAEA,qBACE;;0BACE,wPAAC;gBAAI,WAAU;;kCAEb,wPAAC;wBAAI,WAAU;wBAAgD,SAAS;;;;;;kCAGxE,wPAAC;wBAAI,WAAU;;0CAEb,wPAAC;gCAAI,WAAU;;kDACb,wPAAC;wCAAG,WAAU;kDAAkC;;;;;;kDAChD,wPAAC;wCAAO,SAAS;wCAAS,WAAU;kDAClC,cAAA,wPAAC,2MAAC;4CAAC,WAAU;;;;;;;;;;;;;;;;;0CAKjB,wPAAC;gCAAI,WAAU;;kDACb,wPAAC;wCAAG,WAAU;kDAAwC,aAAa,KAAK;;;;;;kDACxE,wPAAC;wCAAE,WAAU;kDAA8B,WAAW,aAAa,UAAU;;;;;;kDAG7E,wPAAC;wCAAI,WAAU;kDAAqC,aAAa,OAAO;;;;;;oCAEvE,aAAa,SAAS,kBACrB,wPAAC;wCAAI,WAAU;;0DACb,wPAAC;gDAAE,WAAU;0DAA6B;;;;;;0DAC1C,wPAAC;gDACC,KAAK,aAAa,SAAS,IAAI;gDAC/B,KAAI;gDACJ,WAAU;gDACV,eAAe,IAAM,mBAAmB;;;;;;;;;;;;;;;;;;0CAOhD,wPAAC;gCAAI,WAAU;0CACb,cAAA,wPAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;YAON,mBAAmB,aAAa,SAAS,kBACxC,wPAAC;gBACC,WAAU;gBACV,SAAS,IAAM,mBAAmB;;kCAElC,wPAAC;wBACC,SAAS,IAAM,mBAAmB;wBAClC,WAAU;kCAEV,cAAA,wPAAC,2MAAC;4BAAC,WAAU;;;;;;;;;;;kCAEf,wPAAC;wBACC,KAAK,aAAa,SAAS,IAAI;wBAC/B,KAAI;wBACJ,WAAU;wBACV,SAAS,CAAC,IAAM,EAAE,eAAe;;;;;;kCAEnC,wPAAC;wBAAE,WAAU;kCAAoE;;;;;;;;;;;;;;AAO3F"}},
    {"offset": {"line": 475, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/components/notification-bell.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { Bell, X, Plus } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { NotificationDetailDialog } from \"./notification-detail-dialog\"\n\ninterface Notification {\n  id: number\n  title: string\n  message: string\n  image_url?: string\n  created_at: string\n  is_read: boolean\n}\n\nexport function NotificationBell() {\n  const [notifications, setNotifications] = useState<Notification[]>([])\n  const [isOpen, setIsOpen] = useState(false)\n  const [unreadCount, setUnreadCount] = useState(0)\n  const [selectedNotification, setSelectedNotification] = useState<Notification | null>(null)\n  const [isDialogOpen, setIsDialogOpen] = useState(false)\n  const dropdownRef = useRef<HTMLDivElement>(null)\n\n  // 通知を取得\n  const fetchNotifications = async () => {\n    try {\n      const res = await fetch(\"/api/notifications\")\n      if (res.ok) {\n        const data = await res.json()\n        if (Array.isArray(data)) {\n          setNotifications(data)\n          setUnreadCount(data.filter((n: Notification) => !n.is_read).length)\n        }\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch notifications:\", error)\n    }\n  }\n\n  // 全て既読にする\n  const markAllAsRead = async () => {\n    try {\n      const res = await fetch(\"/api/notifications/read-all\", { method: \"POST\" })\n      if (res.ok) {\n        setNotifications((prev) => prev.map((n) => ({ ...n, is_read: true })))\n        setUnreadCount(0)\n      }\n    } catch (error) {\n      console.error(\"Failed to mark all as read:\", error)\n    }\n  }\n\n  // 個別の通知を既読にする\n  const markAsRead = async (id: number) => {\n    try {\n      await fetch(`/api/notifications/${id}/read`, { method: \"POST\" })\n      setNotifications((prev) => prev.map((n) => (n.id === id ? { ...n, is_read: true } : n)))\n      setUnreadCount((prev) => Math.max(0, prev - 1))\n    } catch (error) {\n      console.error(\"Failed to mark as read:\", error)\n    }\n  }\n\n  // 通知をクリックして詳細を表示\n  const handleNotificationClick = (notification: Notification) => {\n    setSelectedNotification(notification)\n    setIsDialogOpen(true)\n    if (!notification.is_read) {\n      markAsRead(notification.id)\n    }\n  }\n\n  useEffect(() => {\n    fetchNotifications()\n  }, [])\n\n  // ドロップダウン外クリックで閉じる\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  const formatDate = (dateString: string) => {\n    if (!dateString) return \"\"\n\n    try {\n      // MySQLの日付形式 \"YYYY-MM-DD HH:mm:ss\" をパース\n      const cleanDateString = dateString.replace(\" \", \"T\")\n      const date = new Date(cleanDateString)\n\n      // Invalid Date チェック\n      if (isNaN(date.getTime())) {\n        console.log(\"[v0] Invalid date string:\", dateString)\n        return \"\"\n      }\n\n      return date.toLocaleDateString(\"ja-JP\", {\n        timeZone: \"Asia/Tokyo\",\n        month: \"numeric\",\n        day: \"numeric\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      })\n    } catch (error) {\n      console.log(\"[v0] Date parse error:\", error)\n      return \"\"\n    }\n  }\n\n  return (\n    <>\n      <div className=\"relative\" ref={dropdownRef}>\n        {/* ベルアイコン */}\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className=\"relative p-2 rounded-full hover:bg-gray-100 transition-colors\"\n          aria-label=\"お知らせ\"\n        >\n          <Bell className=\"h-6 w-6 text-gray-700\" />\n          {/* 未読バッジ */}\n          {unreadCount > 0 && (\n            <span className=\"absolute top-0 right-0 h-5 w-5 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold\">\n              {unreadCount > 9 ? \"9+\" : unreadCount}\n            </span>\n          )}\n        </button>\n\n        {/* ドロップダウン */}\n        {isOpen && (\n          <div className=\"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50\">\n            {/* ヘッダー */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n              <h3 className=\"font-bold text-gray-900\">お知らせ</h3>\n              <div className=\"flex items-center gap-2\">\n                <Link\n                  href=\"/notifications/create\"\n                  className=\"p-1.5 rounded-md hover:bg-yellow-100 text-yellow-600\"\n                  title=\"お知らせを作成\"\n                  onClick={() => setIsOpen(false)}\n                >\n                  <Plus className=\"h-5 w-5\" />\n                </Link>\n                <button onClick={() => setIsOpen(false)} className=\"p-1.5 rounded-md hover:bg-gray-100\">\n                  <X className=\"h-5 w-5 text-gray-500\" />\n                </button>\n              </div>\n            </div>\n\n            {/* 通知リスト */}\n            <div className=\"max-h-80 overflow-y-auto\">\n              {notifications.length === 0 ? (\n                <div className=\"p-4 text-center text-gray-500\">お知らせはありません</div>\n              ) : (\n                notifications.map((notification) => (\n                  <button\n                    key={notification.id}\n                    onClick={() => handleNotificationClick(notification)}\n                    className={`w-full text-left p-4 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors ${\n                      !notification.is_read ? \"bg-yellow-50\" : \"\"\n                    }`}\n                  >\n                    <div className=\"flex items-start gap-2\">\n                      {!notification.is_read && (\n                        <span className=\"mt-1.5 h-2 w-2 bg-red-500 rounded-full flex-shrink-0\" />\n                      )}\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-semibold text-gray-900 text-sm\">{notification.title}</h4>\n                        <p className=\"text-gray-600 text-sm mt-1 line-clamp-2\">\n                          {notification.message.replace(/<[^>]*>/g, \"\")}\n                        </p>\n                        <span className=\"text-gray-400 text-xs mt-2 block\">{formatDate(notification.created_at)}</span>\n                      </div>\n                    </div>\n                  </button>\n                ))\n              )}\n            </div>\n\n            {/* フッター */}\n            {notifications.length > 0 && unreadCount > 0 && (\n              <div className=\"p-3 border-t border-gray-200\">\n                <button\n                  onClick={markAllAsRead}\n                  className=\"w-full py-2 text-sm text-yellow-600 hover:text-yellow-700 font-medium\"\n                >\n                  すべて既読にする\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* 詳細ダイアログ */}\n      <NotificationDetailDialog\n        notification={selectedNotification}\n        isOpen={isDialogOpen}\n        onClose={() => {\n          setIsDialogOpen(false)\n          setSelectedNotification(null)\n        }}\n      />\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 800, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 804, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/components/app-layout.tsx"],"sourcesContent":["\"use client\"\n\nimport type { ReactNode } from \"react\"\nimport { Sidebar } from \"./sidebar\"\nimport { NotificationBell } from \"./notification-bell\"\nimport { useAuth } from \"./auth-provider\"\nimport { LogOut } from \"lucide-react\"\n\ninterface AppLayoutProps {\n  children: ReactNode\n}\n\nexport function AppLayout({ children }: AppLayoutProps) {\n  const { store, logout, isLoading } = useAuth()\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* サイドバー */}\n      <Sidebar />\n\n      {/* メインコンテンツ */}\n      <div className=\"flex-1 flex flex-col min-h-screen\">\n        {/* ヘッダー（通知アイコン用） */}\n        <header className=\"sticky top-0 z-30 bg-white border-b border-gray-200 px-4 py-3\">\n          <div className=\"flex items-center justify-end gap-4\">\n            {/* ハンバーガーメニュー分のスペーサー */}\n            <div className=\"w-10\" />\n            <div className=\"flex-1\" />\n\n            {!isLoading && store && (\n              <div className=\"flex items-center gap-3\">\n                <span className=\"text-sm text-gray-600 hidden sm:block\">{store.name}</span>\n                <button\n                  onClick={logout}\n                  className=\"flex items-center gap-1 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\"\n                  title=\"ログアウト\"\n                >\n                  <LogOut className=\"w-4 h-4\" />\n                  <span className=\"hidden sm:inline\">ログアウト</span>\n                </button>\n              </div>\n            )}\n\n            <NotificationBell />\n          </div>\n        </header>\n\n        {/* ページコンテンツ */}\n        <main className=\"flex-1 p-4\">{children}</main>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AANA;;;;;;AAYO,SAAS,UAAU,EAAE,QAAQ,EAAkB;IACpD,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,oJAAO;IAE5C,qBACE,wPAAC;QAAI,WAAU;;0BAEb,wPAAC,2IAAO;;;;;0BAGR,wPAAC;gBAAI,WAAU;;kCAEb,wPAAC;wBAAO,WAAU;kCAChB,cAAA,wPAAC;4BAAI,WAAU;;8CAEb,wPAAC;oCAAI,WAAU;;;;;;8CACf,wPAAC;oCAAI,WAAU;;;;;;gCAEd,CAAC,aAAa,uBACb,wPAAC;oCAAI,WAAU;;sDACb,wPAAC;4CAAK,WAAU;sDAAyC,MAAM,IAAI;;;;;;sDACnE,wPAAC;4CACC,SAAS;4CACT,WAAU;4CACV,OAAM;;8DAEN,wPAAC,8NAAM;oDAAC,WAAU;;;;;;8DAClB,wPAAC;oDAAK,WAAU;8DAAmB;;;;;;;;;;;;;;;;;;8CAKzC,wPAAC,iKAAgB;;;;;;;;;;;;;;;;kCAKrB,wPAAC;wBAAK,WAAU;kCAAc;;;;;;;;;;;;;;;;;;AAItC"}},
    {"offset": {"line": 935, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/lib/japanese-holidays.ts"],"sourcesContent":["// 日本の祝日データ（2024年〜2030年）\n// 春分の日・秋分の日は天文学的計算に基づく\n\nexport interface Holiday {\n  date: string\n  name: string\n  type: \"holiday\" | \"closed\" | \"store-closed\" | \"notice\" | \"order\" // noticeタイプを追加\n  color?: string // 店舗ごとの色を追加\n}\n\n// 固定祝日\nconst FIXED_HOLIDAYS: { month: number; day: number; name: string }[] = [\n  { month: 1, day: 1, name: \"元日\" },\n  { month: 2, day: 11, name: \"建国記念の日\" },\n  { month: 2, day: 23, name: \"天皇誕生日\" },\n  { month: 4, day: 29, name: \"昭和の日\" },\n  { month: 5, day: 3, name: \"憲法記念日\" },\n  { month: 5, day: 4, name: \"みどりの日\" },\n  { month: 5, day: 5, name: \"こどもの日\" },\n  { month: 8, day: 11, name: \"山の日\" },\n  { month: 11, day: 3, name: \"文化の日\" },\n  { month: 11, day: 23, name: \"勤労感謝の日\" },\n]\n\nconst STORE_CLOSED_DAYS: { month: number; day: number; name: string }[] = [\n  { month: 1, day: 2, name: \"店休日\" },\n  { month: 1, day: 3, name: \"店休日\" },\n]\n\nconst YEARLY_NOTICES: { month: number; day: number; name: string }[] = [{ month: 12, day: 31, name: \"18時迄営業\" }]\n\nconst YEARLY_ORDERS: { months: number[]; name: string }[] = [\n  { months: [2, 5], name: \"Tシャツ発注日\" },\n  { months: [8, 11], name: \"パーカー発注日\" },\n  { months: [9], name: \"ベンチコート発注日\" },\n]\n\n// dayOfWeek: 0=日, 1=月, 2=火, 3=水, 4=木, 5=金, 6=土\nconst STORE_REGULAR_HOLIDAYS: { week: number; dayOfWeek: number; name: string; color: string }[] = [\n  { week: 1, dayOfWeek: 2, name: \"足利緑町店定休日\", color: \"#8b5cf6\" }, // 紫\n  { week: 1, dayOfWeek: 3, name: \"前橋50号店定休日\", color: \"#3b82f6\" }, // 青\n  { week: 2, dayOfWeek: 2, name: \"高崎棟高店定休日\", color: \"#eab308\" }, // 黄色\n  { week: 2, dayOfWeek: 3, name: \"伊勢崎韮塚店定休日\", color: \"#22c55e\" }, // 緑\n  { week: 3, dayOfWeek: 2, name: \"太田新田店定休日\", color: \"#f97316\" }, // オレンジ\n  { week: 3, dayOfWeek: 3, name: \"新前橋店定休日\", color: \"#ec4899\" }, // ピンク\n]\n\n// ハッピーマンデー祝日\nconst HAPPY_MONDAY_HOLIDAYS: { month: number; week: number; name: string }[] = [\n  { month: 1, week: 2, name: \"成人の日\" },\n  { month: 7, week: 3, name: \"海の日\" },\n  { month: 9, week: 3, name: \"敬老の日\" },\n  { month: 10, week: 2, name: \"スポーツの日\" },\n]\n\n// 春分の日・秋分の日（年ごとに異なる）\nconst EQUINOX_DAYS: { [year: number]: { spring: number; autumn: number } } = {\n  2024: { spring: 20, autumn: 22 },\n  2025: { spring: 20, autumn: 23 },\n  2026: { spring: 20, autumn: 23 },\n  2027: { spring: 21, autumn: 23 },\n  2028: { spring: 20, autumn: 22 },\n  2029: { spring: 20, autumn: 23 },\n  2030: { spring: 20, autumn: 23 },\n}\n\n// 第n月曜日の日付を取得\nfunction getNthMonday(year: number, month: number, n: number): number {\n  const firstDay = new Date(year, month - 1, 1)\n  const firstMonday = firstDay.getDay() === 1 ? 1 : (8 - firstDay.getDay() + 1) % 7 || 7\n  return firstMonday + (n - 1) * 7\n}\n\nfunction getNthDayOfWeek(year: number, month: number, week: number, dayOfWeek: number): number {\n  const firstDay = new Date(year, month - 1, 1)\n  const firstDayOfWeek = firstDay.getDay()\n\n  let firstTargetDay = dayOfWeek - firstDayOfWeek + 1\n  if (firstTargetDay <= 0) {\n    firstTargetDay += 7\n  }\n\n  return firstTargetDay + (week - 1) * 7\n}\n\nfunction formatDate(date: Date): string {\n  return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, \"0\")}-${String(date.getDate()).padStart(2, \"0\")}`\n}\n\nfunction getHolidayDatesSet(year: number): Set<string> {\n  const holidayDates = new Set<string>()\n\n  for (const h of FIXED_HOLIDAYS) {\n    holidayDates.add(`${year}-${String(h.month).padStart(2, \"0\")}-${String(h.day).padStart(2, \"0\")}`)\n  }\n\n  for (const h of HAPPY_MONDAY_HOLIDAYS) {\n    const day = getNthMonday(year, h.month, h.week)\n    holidayDates.add(`${year}-${String(h.month).padStart(2, \"0\")}-${String(day).padStart(2, \"0\")}`)\n  }\n\n  const equinox = EQUINOX_DAYS[year]\n  if (equinox) {\n    holidayDates.add(`${year}-03-${String(equinox.spring).padStart(2, \"0\")}`)\n    holidayDates.add(`${year}-09-${String(equinox.autumn).padStart(2, \"0\")}`)\n  }\n\n  return holidayDates\n}\n\nfunction getSubstituteHolidays(year: number, holidays: Holiday[]): Holiday[] {\n  const substitutes: Holiday[] = []\n  const holidayDates = new Set(holidays.map((h) => h.date))\n\n  for (const holiday of holidays) {\n    const date = new Date(holiday.date)\n    if (date.getDay() === 0) {\n      const nextDay = new Date(date)\n      nextDay.setDate(nextDay.getDate() + 1)\n      while (holidayDates.has(formatDate(nextDay)) || nextDay.getDay() === 0) {\n        nextDay.setDate(nextDay.getDate() + 1)\n      }\n      substitutes.push({\n        date: formatDate(nextDay),\n        name: \"振替休日\",\n        type: \"holiday\",\n      })\n      holidayDates.add(formatDate(nextDay))\n    }\n  }\n\n  return substitutes\n}\n\nfunction getKokuninNoKyujitsu(year: number, holidays: Holiday[]): Holiday[] {\n  const kokuminHolidays: Holiday[] = []\n  const holidayDates = new Set(holidays.map((h) => h.date))\n\n  const equinox = EQUINOX_DAYS[year]\n  if (equinox) {\n    const keirouDay = getNthMonday(year, 9, 3)\n    const autumnDay = equinox.autumn\n\n    if (autumnDay - keirouDay === 2) {\n      const betweenDate = `${year}-09-${String(keirouDay + 1).padStart(2, \"0\")}`\n      if (!holidayDates.has(betweenDate)) {\n        kokuminHolidays.push({\n          date: betweenDate,\n          name: \"国民の休日\",\n          type: \"holiday\",\n        })\n      }\n    }\n  }\n\n  return kokuminHolidays\n}\n\nfunction getStoreRegularHolidays(year: number, holidayDates: Set<string>): Holiday[] {\n  const storeHolidays: Holiday[] = []\n  const allClosedDates = new Set<string>()\n\n  // 各月について定休日を計算\n  for (let month = 1; month <= 12; month++) {\n    for (const store of STORE_REGULAR_HOLIDAYS) {\n      const day = getNthDayOfWeek(year, month, store.week, store.dayOfWeek)\n\n      const lastDayOfMonth = new Date(year, month, 0).getDate()\n      if (day > lastDayOfMonth) continue\n\n      const targetDate = new Date(year, month - 1, day)\n      let dateStr = formatDate(targetDate)\n\n      while (holidayDates.has(dateStr) || allClosedDates.has(dateStr)) {\n        targetDate.setDate(targetDate.getDate() + 1)\n        dateStr = formatDate(targetDate)\n      }\n\n      // この日を定休日として登録\n      allClosedDates.add(dateStr)\n\n      storeHolidays.push({\n        date: dateStr,\n        name: store.name,\n        type: \"store-closed\",\n        color: store.color,\n      })\n    }\n  }\n\n  return storeHolidays\n}\n\nfunction getLastDayOfMonth(year: number, month: number): number {\n  return new Date(year, month, 0).getDate()\n}\n\nfunction getOrderDays(year: number): Holiday[] {\n  const orders: Holiday[] = []\n\n  for (const order of YEARLY_ORDERS) {\n    for (const month of order.months) {\n      const lastDay = getLastDayOfMonth(year, month)\n      orders.push({\n        date: `${year}-${String(month).padStart(2, \"0\")}-${String(lastDay).padStart(2, \"0\")}`,\n        name: order.name,\n        type: \"order\",\n        color: \"#22c55e\", // 緑色\n      })\n    }\n  }\n\n  return orders\n}\n\n// 指定年の祝日一覧を取得\nexport function getJapaneseHolidays(year: number): Holiday[] {\n  const holidays: Holiday[] = []\n\n  for (const h of FIXED_HOLIDAYS) {\n    holidays.push({\n      date: `${year}-${String(h.month).padStart(2, \"0\")}-${String(h.day).padStart(2, \"0\")}`,\n      name: h.name,\n      type: \"holiday\",\n    })\n  }\n\n  for (const h of HAPPY_MONDAY_HOLIDAYS) {\n    const day = getNthMonday(year, h.month, h.week)\n    holidays.push({\n      date: `${year}-${String(h.month).padStart(2, \"0\")}-${String(day).padStart(2, \"0\")}`,\n      name: h.name,\n      type: \"holiday\",\n    })\n  }\n\n  const equinox = EQUINOX_DAYS[year]\n  if (equinox) {\n    holidays.push({\n      date: `${year}-03-${String(equinox.spring).padStart(2, \"0\")}`,\n      name: \"春分の日\",\n      type: \"holiday\",\n    })\n    holidays.push({\n      date: `${year}-09-${String(equinox.autumn).padStart(2, \"0\")}`,\n      name: \"秋分の日\",\n      type: \"holiday\",\n    })\n  }\n\n  const substitutes = getSubstituteHolidays(year, holidays)\n  holidays.push(...substitutes)\n\n  const kokuminHolidays = getKokuninNoKyujitsu(year, holidays)\n  holidays.push(...kokuminHolidays)\n\n  for (const s of STORE_CLOSED_DAYS) {\n    const dateStr = `${year}-${String(s.month).padStart(2, \"0\")}-${String(s.day).padStart(2, \"0\")}`\n    if (!holidays.some((h) => h.date === dateStr)) {\n      holidays.push({\n        date: dateStr,\n        name: s.name,\n        type: \"closed\",\n      })\n    }\n  }\n\n  for (const n of YEARLY_NOTICES) {\n    holidays.push({\n      date: `${year}-${String(n.month).padStart(2, \"0\")}-${String(n.day).padStart(2, \"0\")}`,\n      name: n.name,\n      type: \"notice\",\n    })\n  }\n\n  const orderDays = getOrderDays(year)\n  holidays.push(...orderDays)\n\n  const holidayDatesSet = getHolidayDatesSet(year)\n  for (const sub of substitutes) {\n    holidayDatesSet.add(sub.date)\n  }\n  for (const kokumin of kokuminHolidays) {\n    holidayDatesSet.add(kokumin.date)\n  }\n\n  const storeRegularHolidays = getStoreRegularHolidays(year, holidayDatesSet)\n  holidays.push(...storeRegularHolidays)\n\n  return holidays.sort((a, b) => a.date.localeCompare(b.date))\n}\n\n// 指定日が祝日かチェック\nexport function getHolidayName(date: string): string | null {\n  const year = Number.parseInt(date.slice(0, 4))\n  const holidays = getJapaneseHolidays(year)\n  const holiday = holidays.find((h) => h.date === date)\n  return holiday ? holiday.name : null\n}\n\nexport function getHolidayInfo(date: string): Holiday | null {\n  const year = Number.parseInt(date.slice(0, 4))\n  const holidays = getJapaneseHolidays(year)\n  return holidays.find((h) => h.date === date) || null\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1331, "column": 0}, "map": {"version":3,"sources":["file:///Users/kawamotoshuntasuku/Desktop/dev/oneapp/app/calendar/page.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect } from \"react\"\nimport { AppLayout } from \"@/components/app-layout\"\nimport { ChevronLeft, ChevronRight, Plus, X } from \"lucide-react\"\nimport { getJapaneseHolidays, type Holiday } from \"@/lib/japanese-holidays\"\n\ninterface CalendarEvent {\n  id: number\n  title: string\n  date: string\n  color: string\n  isHoliday?: boolean\n  isClosed?: boolean\n  isStoreClosed?: boolean\n  isNotice?: boolean\n  isOrder?: boolean\n}\n\nconst COLORS = [\n  { name: \"赤\", value: \"#ef4444\" },\n  { name: \"青\", value: \"#3b82f6\" },\n  { name: \"緑\", value: \"#22c55e\" },\n  { name: \"黄\", value: \"#eab308\" },\n  { name: \"紫\", value: \"#a855f7\" },\n  { name: \"ピンク\", value: \"#ec4899\" },\n  { name: \"オレンジ\", value: \"#f97316\" },\n]\n\nexport default function CalendarPage() {\n  const [currentDate, setCurrentDate] = useState<Date | null>(null)\n  const [events, setEvents] = useState<CalendarEvent[]>([])\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [selectedDate, setSelectedDate] = useState<string | null>(null)\n  const [newEventTitle, setNewEventTitle] = useState(\"\")\n  const [newEventColor, setNewEventColor] = useState(COLORS[0].value)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isClient, setIsClient] = useState(false)\n  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false)\n  const [selectedDateForDetail, setSelectedDateForDetail] = useState<string | null>(null)\n  const [selectedDateEvents, setSelectedDateEvents] = useState<CalendarEvent[]>([])\n\n  useEffect(() => {\n    setCurrentDate(new Date())\n    setIsClient(true)\n  }, [])\n\n  const getHolidayEvents = (date: Date): CalendarEvent[] => {\n    const year = date.getFullYear()\n    const holidays: Holiday[] = getJapaneseHolidays(year)\n\n    const prevYearHolidays: Holiday[] = year > 2024 ? getJapaneseHolidays(year - 1) : []\n    const nextYearHolidays: Holiday[] = year < 2030 ? getJapaneseHolidays(year + 1) : []\n\n    const allHolidays: Holiday[] = [...prevYearHolidays, ...holidays, ...nextYearHolidays]\n\n    return allHolidays.map((h: Holiday, index: number) => {\n      const isHoliday = h.type === \"holiday\"\n      const isClosed = h.type === \"closed\"\n      const isStoreClosed = h.type === \"store-closed\"\n      const isNotice = h.type === \"notice\"\n      const isOrder = h.type === \"order\"\n\n      let eventColor = \"#ef4444\"\n      if (h.color) {\n        eventColor = h.color\n      } else if (isClosed || isStoreClosed) {\n        eventColor = \"#6b7280\"\n      } else if (isNotice) {\n        eventColor = \"#3b82f6\"\n      } else if (isOrder) {\n        eventColor = \"#22c55e\"\n      }\n\n      return {\n        id: -index - 1,\n        title: h.name,\n        date: h.date,\n        color: eventColor,\n        isHoliday,\n        isClosed,\n        isStoreClosed,\n        isNotice,\n        isOrder,\n      }\n    })\n  }\n\n  const fetchEvents = async (date: Date) => {\n    console.log(\"[v0] fetchEvents called for:\", date.getFullYear(), date.getMonth() + 1)\n    try {\n      const year = date.getFullYear()\n      const month = date.getMonth() + 1\n      const url = `/api/calendar?year=${year}&month=${month}`\n      console.log(\"[v0] Fetching from URL:\", url)\n\n      const res = await fetch(url)\n      console.log(\"[v0] API response status:\", res.status)\n\n      const holidayEvents = getHolidayEvents(date)\n      console.log(\"[v0] Holiday events count:\", holidayEvents.length)\n\n      if (res.ok) {\n        const data = await res.json()\n        console.log(\"[v0] API returned data:\", JSON.stringify(data))\n        console.log(\"[v0] Is array:\", Array.isArray(data))\n        console.log(\"[v0] Data length:\", Array.isArray(data) ? data.length : \"N/A\")\n\n        if (Array.isArray(data)) {\n          data.forEach((event: CalendarEvent, i: number) => {\n            console.log(`[v0] DB Event ${i}:`, event.id, event.title, event.date, event.color)\n          })\n\n          const allEvents = [...holidayEvents, ...data]\n          console.log(\"[v0] Total events to display:\", allEvents.length)\n          setEvents(allEvents)\n        } else {\n          console.log(\"[v0] Data is not an array, using only holidays\")\n          setEvents(holidayEvents)\n        }\n      } else {\n        const errorText = await res.text()\n        console.log(\"[v0] API response not ok:\", errorText)\n        setEvents(holidayEvents)\n      }\n    } catch (error) {\n      console.error(\"[v0] Failed to fetch events:\", error)\n      if (date) {\n        setEvents(getHolidayEvents(date))\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (currentDate) {\n      fetchEvents(currentDate)\n    }\n  }, [currentDate])\n\n  const changeMonth = (delta: number) => {\n    if (!currentDate) return\n    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + delta, 1))\n  }\n\n  const goToToday = () => {\n    setCurrentDate(new Date())\n  }\n\n  const generateCalendarDays = (date: Date) => {\n    const year = date.getFullYear()\n    const month = date.getMonth()\n    const firstDay = new Date(year, month, 1)\n    const lastDay = new Date(year, month + 1, 0)\n    const startDay = firstDay.getDay()\n    const daysInMonth = lastDay.getDate()\n\n    const days: { date: Date; isCurrentMonth: boolean }[] = []\n\n    const prevMonthLastDay = new Date(year, month, 0).getDate()\n    for (let i = startDay - 1; i >= 0; i--) {\n      days.push({\n        date: new Date(year, month - 1, prevMonthLastDay - i),\n        isCurrentMonth: false,\n      })\n    }\n\n    for (let i = 1; i <= daysInMonth; i++) {\n      days.push({\n        date: new Date(year, month, i),\n        isCurrentMonth: true,\n      })\n    }\n\n    const remainingDays = 42 - days.length\n    for (let i = 1; i <= remainingDays; i++) {\n      days.push({\n        date: new Date(year, month + 1, i),\n        isCurrentMonth: false,\n      })\n    }\n\n    return days\n  }\n\n  const formatDateKey = (date: Date) => {\n    return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, \"0\")}-${String(date.getDate()).padStart(2, \"0\")}`\n  }\n\n  const openAddModal = (date: Date) => {\n    setSelectedDate(formatDateKey(date))\n    setNewEventTitle(\"\")\n    setNewEventColor(COLORS[0].value)\n    setIsModalOpen(true)\n  }\n\n  const addEvent = async () => {\n    if (!newEventTitle.trim() || !selectedDate) {\n      return\n    }\n\n    setIsLoading(true)\n\n    try {\n      const res = await fetch(\"/api/calendar\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          title: newEventTitle.trim(),\n          date: selectedDate,\n          color: newEventColor,\n        }),\n      })\n\n      if (res.ok) {\n        setIsModalOpen(false)\n        setNewEventTitle(\"\")\n\n        // イベントを再取得\n        if (currentDate) {\n          await fetchEvents(currentDate)\n\n          // 詳細モーダルを更新して再表示\n          const holidayEvents = getHolidayEvents(currentDate)\n          const year = currentDate.getFullYear()\n          const month = currentDate.getMonth() + 1\n          const fetchRes = await fetch(`/api/calendar?year=${year}&month=${month}`)\n          if (fetchRes.ok) {\n            const data = await fetchRes.json()\n            if (Array.isArray(data)) {\n              const allEvents = [...holidayEvents, ...data]\n              const updatedDayEvents = allEvents.filter((e) => e.date === selectedDate)\n              setSelectedDateForDetail(selectedDate)\n              setSelectedDateEvents(updatedDayEvents)\n              setIsDetailModalOpen(true)\n            }\n          }\n        }\n      } else {\n        const errorData = await res.json()\n        alert(`イベントの追加に失敗しました: ${errorData.error || \"不明なエラー\"}`)\n      }\n    } catch (error) {\n      console.error(\"Failed to add event:\", error)\n      alert(\"イベントの追加に失敗しました。ネットワーク接続を確認してください。\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const deleteEvent = async (event: CalendarEvent, e: React.MouseEvent) => {\n    e.stopPropagation()\n    if (event.isHoliday || event.isClosed || event.isStoreClosed || event.isNotice || event.isOrder) return\n    if (!confirm(\"このイベントを削除しますか？\")) return\n\n    try {\n      const res = await fetch(`/api/calendar/${event.id}`, { method: \"DELETE\" })\n      if (res.ok && currentDate) {\n        fetchEvents(currentDate)\n      }\n    } catch (error) {\n      console.error(\"Failed to delete event:\", error)\n    }\n  }\n\n  const openDetailModal = (date: Date, dayEvents: CalendarEvent[]) => {\n    const dateKey = formatDateKey(date)\n    setSelectedDateForDetail(dateKey)\n    setSelectedDateEvents(dayEvents)\n    setIsDetailModalOpen(true)\n  }\n\n  const openAddModalFromDetail = () => {\n    setIsDetailModalOpen(false)\n    if (selectedDateForDetail) {\n      setSelectedDate(selectedDateForDetail)\n      setNewEventTitle(\"\")\n      setNewEventColor(COLORS[0].value)\n      setIsModalOpen(true)\n    }\n  }\n\n  const deleteEventFromDetail = async (event: CalendarEvent) => {\n    if (event.isHoliday || event.isClosed || event.isStoreClosed || event.isNotice || event.isOrder) return\n    if (!confirm(\"このイベントを削除しますか？\")) return\n\n    try {\n      const res = await fetch(`/api/calendar/${event.id}`, { method: \"DELETE\" })\n      if (res.ok && currentDate) {\n        fetchEvents(currentDate)\n        setSelectedDateEvents((prev) => prev.filter((e) => e.id !== event.id))\n      }\n    } catch (error) {\n      console.error(\"Failed to delete event:\", error)\n    }\n  }\n\n  const formatDateDisplay = (dateStr: string) => {\n    const date = new Date(dateStr)\n    const weekDayNames = [\"日\", \"月\", \"火\", \"水\", \"木\", \"金\", \"土\"]\n    return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日（${weekDayNames[date.getDay()]}）`\n  }\n\n  const getEventStyle = (event: CalendarEvent) => {\n    if (event.isHoliday) {\n      return {\n        className: \"text-red-700\",\n        style: { backgroundColor: \"#fee2e2\" },\n      }\n    }\n    if (event.isClosed || event.isStoreClosed) {\n      return {\n        className: \"text-gray-700\",\n        style: { backgroundColor: \"#e5e7eb\" },\n      }\n    }\n    if (event.isNotice) {\n      return {\n        className: \"text-blue-700\",\n        style: { backgroundColor: \"#dbeafe\" },\n      }\n    }\n    if (event.isOrder) {\n      return {\n        className: \"text-green-700\",\n        style: { backgroundColor: \"#dcfce7\" },\n      }\n    }\n    return {\n      className: \"text-white\",\n      style: { backgroundColor: event.color },\n    }\n  }\n\n  const weekDays = [\"日\", \"月\", \"火\", \"水\", \"木\", \"金\", \"土\"]\n\n  if (!isClient || !currentDate) {\n    return (\n      <AppLayout>\n        <div className=\"min-h-screen bg-yellow-50 p-4 md:p-6 flex items-center justify-center\">\n          <div className=\"text-yellow-700\">読み込み中...</div>\n        </div>\n      </AppLayout>\n    )\n  }\n\n  const days = generateCalendarDays(currentDate)\n  const today = new Date()\n  const todayKey = formatDateKey(today)\n\n  const holidayDates = new Set(events.filter((e) => e.isHoliday).map((e) => e.date))\n  const closedDates = new Set(events.filter((e) => e.isClosed).map((e) => e.date))\n  const storeClosedDates = new Set(events.filter((e) => e.isStoreClosed).map((e) => e.date))\n  const noticeDates = new Set(events.filter((e) => e.isNotice).map((e) => e.date))\n  const orderDates = new Set(events.filter((e) => e.isOrder).map((e) => e.date))\n\n  return (\n    <AppLayout>\n      <div className=\"min-h-screen bg-yellow-50 p-4 md:p-6\">\n        {/* ヘッダー - 黄色ベース */}\n        <div className=\"bg-white rounded-lg shadow-sm border-2 border-yellow-400 p-4 mb-4\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={goToToday}\n                className=\"px-4 py-2 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 transition-colors\"\n              >\n                今日\n              </button>\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={() => changeMonth(-1)}\n                  className=\"p-2 hover:bg-yellow-100 rounded-lg transition-colors\"\n                >\n                  <ChevronLeft className=\"h-5 w-5 text-yellow-700\" />\n                </button>\n                <button onClick={() => changeMonth(1)} className=\"p-2 hover:bg-yellow-100 rounded-lg transition-colors\">\n                  <ChevronRight className=\"h-5 w-5 text-yellow-700\" />\n                </button>\n              </div>\n              <h1 className=\"text-xl font-bold text-gray-900\">\n                {currentDate.getFullYear()}年{currentDate.getMonth() + 1}月\n              </h1>\n            </div>\n          </div>\n        </div>\n\n        {/* カレンダー - 黄色ベース */}\n        <div className=\"bg-white rounded-lg shadow-sm border-2 border-yellow-400 overflow-hidden\">\n          {/* 曜日ヘッダー - 黄色背景 */}\n          <div className=\"grid grid-cols-7 bg-yellow-400\">\n            {weekDays.map((day, index) => (\n              <div\n                key={day}\n                className={`py-3 text-center text-sm font-bold ${\n                  index === 0 ? \"text-red-600\" : index === 6 ? \"text-blue-600\" : \"text-gray-900\"\n                }`}\n              >\n                {day}\n              </div>\n            ))}\n          </div>\n\n          {/* 日付グリッド */}\n          <div className=\"grid grid-cols-7\">\n            {days.map((day, index) => {\n              const dateKey = formatDateKey(day.date)\n              const dayEvents = events.filter((e) => e.date === dateKey)\n              const isToday = dateKey === todayKey\n              const dayOfWeek = day.date.getDay()\n              const isHoliday = holidayDates.has(dateKey)\n              const isClosed = closedDates.has(dateKey)\n              const isStoreClosed = storeClosedDates.has(dateKey)\n              const isNotice = noticeDates.has(dateKey)\n              const isOrder = orderDates.has(dateKey)\n\n              return (\n                <div\n                  key={index}\n                  onClick={() => openDetailModal(day.date, dayEvents)}\n                  className={`min-h-[80px] md:min-h-[120px] border-b border-r border-yellow-200 p-1 cursor-pointer ${\n                    !day.isCurrentMonth ? \"bg-yellow-50/50\" : \"bg-white\"\n                  } hover:bg-yellow-50 transition-colors`}\n                >\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <span\n                      className={`text-sm w-7 h-7 flex items-center justify-center rounded-full ${\n                        isToday\n                          ? \"bg-yellow-400 text-gray-900 font-bold shadow-md\"\n                          : !day.isCurrentMonth\n                            ? \"text-gray-400\"\n                            : isHoliday || dayOfWeek === 0\n                              ? \"text-red-500 font-semibold\"\n                              : dayOfWeek === 6\n                                ? \"text-blue-500 font-semibold\"\n                                : isClosed || isStoreClosed || isNotice || isOrder\n                                  ? \"text-gray-600\"\n                                  : \"text-gray-700\"\n                      }`}\n                    >\n                      {day.date.getDate()}\n                    </span>\n                    {dayEvents.length > 0 && (\n                      <span className=\"md:hidden text-xs bg-yellow-400 text-gray-900 rounded-full px-1.5 py-0.5 font-medium\">\n                        {dayEvents.length}\n                      </span>\n                    )}\n                    {day.isCurrentMonth && (\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          openAddModal(day.date)\n                        }}\n                        className=\"hidden md:block p-1 hover:bg-yellow-200 rounded opacity-0 hover:opacity-100 transition-all\"\n                      >\n                        <Plus className=\"h-4 w-4 text-yellow-600\" />\n                      </button>\n                    )}\n                  </div>\n                  <div className=\"hidden md:block space-y-1\">\n                    {dayEvents.slice(0, 3).map((event) => {\n                      const eventStyle = getEventStyle(event)\n                      return (\n                        <div\n                          key={event.id}\n                          className={`group flex items-center gap-1 px-1.5 py-0.5 rounded text-xs truncate ${eventStyle.className}`}\n                          style={eventStyle.style}\n                        >\n                          <span className=\"truncate flex-1\">{event.title}</span>\n                          {!event.isHoliday &&\n                            !event.isClosed &&\n                            !event.isStoreClosed &&\n                            !event.isNotice &&\n                            !event.isOrder && (\n                              <button\n                                onClick={(e) => deleteEvent(event, e)}\n                                className=\"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0\"\n                              >\n                                <X className=\"h-3 w-3\" />\n                              </button>\n                            )}\n                        </div>\n                      )\n                    })}\n                    {dayEvents.length > 3 && (\n                      <div className=\"text-xs text-yellow-700 px-1 font-medium\">+{dayEvents.length - 3}件</div>\n                    )}\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </div>\n\n        {/* 詳細モーダル */}\n        {isDetailModalOpen && selectedDateForDetail && (\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-lg shadow-xl w-full max-w-md border-2 border-yellow-400 max-h-[80vh] flex flex-col\">\n              <div className=\"flex items-center justify-between p-4 border-b border-yellow-200 bg-yellow-400\">\n                <h2 className=\"text-lg font-bold text-gray-900\">{formatDateDisplay(selectedDateForDetail)}</h2>\n                <button\n                  onClick={() => setIsDetailModalOpen(false)}\n                  className=\"p-1 hover:bg-yellow-500 rounded transition-colors\"\n                >\n                  <X className=\"h-5 w-5 text-gray-900\" />\n                </button>\n              </div>\n              <div className=\"flex-1 overflow-y-auto p-4\">\n                {selectedDateEvents.length === 0 ? (\n                  <p className=\"text-gray-500 text-center py-8\">この日にイベントはありません</p>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {selectedDateEvents.map((event) => {\n                      const eventStyle = getEventStyle(event)\n                      const isDeletable =\n                        !event.isHoliday && !event.isClosed && !event.isStoreClosed && !event.isNotice && !event.isOrder\n                      return (\n                        <div\n                          key={event.id}\n                          className={`flex items-center justify-between p-3 rounded-lg ${eventStyle.className}`}\n                          style={eventStyle.style}\n                        >\n                          <span className=\"font-medium\">{event.title}</span>\n                          {isDeletable && (\n                            <button\n                              onClick={() => deleteEventFromDetail(event)}\n                              className=\"p-1 hover:bg-black/10 rounded transition-colors\"\n                            >\n                              <X className=\"h-4 w-4\" />\n                            </button>\n                          )}\n                        </div>\n                      )\n                    })}\n                  </div>\n                )}\n              </div>\n              <div className=\"p-4 border-t border-yellow-200\">\n                <button\n                  onClick={openAddModalFromDetail}\n                  className=\"w-full py-2 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 transition-colors flex items-center justify-center gap-2\"\n                >\n                  <Plus className=\"h-5 w-5\" />\n                  イベントを追加\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* イベント追加モーダル */}\n        {isModalOpen && (\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-lg shadow-xl w-full max-w-md border-2 border-yellow-400\">\n              <div className=\"flex items-center justify-between p-4 border-b border-yellow-200 bg-yellow-400\">\n                <h2 className=\"text-lg font-bold text-gray-900\">イベントを追加</h2>\n                <button\n                  onClick={() => setIsModalOpen(false)}\n                  className=\"p-1 hover:bg-yellow-500 rounded transition-colors\"\n                >\n                  <X className=\"h-5 w-5 text-gray-900\" />\n                </button>\n              </div>\n              <div className=\"p-4 space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">日付</label>\n                  <input\n                    type=\"date\"\n                    value={selectedDate || \"\"}\n                    onChange={(e) => setSelectedDate(e.target.value)}\n                    className=\"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">タイトル</label>\n                  <input\n                    type=\"text\"\n                    value={newEventTitle}\n                    onChange={(e) => setNewEventTitle(e.target.value)}\n                    placeholder=\"イベント名を入力\"\n                    className=\"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">色</label>\n                  <div className=\"flex gap-2 flex-wrap\">\n                    {COLORS.map((color) => (\n                      <button\n                        key={color.value}\n                        onClick={() => setNewEventColor(color.value)}\n                        className={`w-8 h-8 rounded-full border-2 transition-transform ${\n                          newEventColor === color.value ? \"border-gray-900 scale-110 shadow-md\" : \"border-gray-300\"\n                        }`}\n                        style={{ backgroundColor: color.value }}\n                        title={color.name}\n                      />\n                    ))}\n                  </div>\n                </div>\n              </div>\n              <div className=\"flex gap-3 p-4 border-t border-yellow-200\">\n                <button\n                  onClick={addEvent}\n                  disabled={isLoading || !newEventTitle.trim()}\n                  className=\"flex-1 py-2 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                >\n                  {isLoading ? \"追加中...\" : \"追加\"}\n                </button>\n                <button\n                  onClick={() => setIsModalOpen(false)}\n                  className=\"px-4 py-2 border-2 border-yellow-400 text-yellow-700 font-semibold rounded-lg hover:bg-yellow-50 transition-colors\"\n                >\n                  キャンセル\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </AppLayout>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}